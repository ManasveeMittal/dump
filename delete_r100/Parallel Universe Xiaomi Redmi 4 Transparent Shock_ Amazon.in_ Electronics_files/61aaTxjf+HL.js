(function(y){var v=window.AmazonUIPageJS||window.P,G=v._namespace||v.attributeErrors,r=G?G("DetailPageImageBlockAssets"):v;r.guardFatal?r.guardFatal(y)(r,window):r.execute(function(){y(r,window)})})(function(y,v,G){y.register("postMetric",function(){return{postCountMetric:function(b){if("undefined"!==typeof b){var a=v.ue;if(a){var c=a.count(b)||0;a.count(b,c+1)}}},postTimeMetric:function(b,a){if("undefined"!==typeof b&&"undefined"!==typeof a){var c=v.ue;c&&c.count(b,a)}}}});y.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});y.register("postEarlyMetric",function(){return null});y.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(b,a,c,d){c.extraVideos&&(d.videos=b.merge(c.extraVideos,d.videos),delete c.extraVideos);b=b.extend(!0,{},c,d);var e=new a(b);y.register("ImageBlockAPI",function(){return e.api});return e});y.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(b,a,c){b=c.airyConfig;
b.jsUrl&&y.load.js(b.jsUrl);b.cssUrl&&y.load.css(b.cssUrl)});y.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(b,a,c,d,e,g){var h={};return function(b){var m=this;m.dispatch=function(b,c){var d=h[b];e.isDefined(d)&&a.each(d,function(a,b){b.call(v,c)})};m.register=function(a,b){e.isDefined(h[a])||(h[a]=[]);"function"===typeof b&&h[a].push(b)};m.model=new c(b,m);m.view=new d(b,m,m.model);m.api=new g(b,m,
m.model);m.init=function(){m.model.init();m.view.init()};m.init()}});y.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(b,a,c){function d(a,b,e,f,g){c.isDefined(a)&&(p.type=a);c.isDefined(b)&&(p.index=b);c.isDefined(e)&&(p.thumbnailIndex=e);c.isDefined(f)&&(p.variant=f);c.isDefined(g)&&(p.color=g)}function e(a){d("image",0,0,"MAIN",a||m.landingAsinColor||m.defaultColor)}function g(a){a=a.data;q=b.copy(p);d(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function h(a){g(a);
a=b.copy(a);a.data=b.copy(p);n.dispatch("updateView",a)}function k(){q=b.copy(p);e(p.color)}var m,n,p={},q={},r,v;return function(a,c){n=c;m=a;n.register("updateSelection",h);n.register("updateModel",g);n.register("resetModel",k);this.init=function(){e()};this.getCurrentItem=function(){return b.copy(p)};this.getPreviousItem=function(){return b.copy(q)};this.setCurrentEvent=function(a){r=a};this.getCurrentEvent=function(){return r};this.setImmersiveViewModalInstance=function(a){v=a};this.getImmersiveViewModalInstance=
function(){return v}}});y.when("ImageBlockBTF","postMetric").execute(function(b,a){function c(a,b,c,d,f){function g(a){"click"===a.type&&d.postCountMetric("thumbClick");"click"===a.type&&L.overrideAltImageClickAction?G.dispatch("thumbActionClick",a):G.dispatch("updateSelection",a)}function p(a){L.useClickZoom||G.dispatch("imageClick",a)}function q(a){L.useClickZoom||G.dispatch("imageHover",a)}function r(a){G.dispatch("button360Click",a)}function y(b){!c.isDefined(b)||"swatchClick"!==
b.type&&"updatedData"!==b.type?(D.update(b),"swatchHover"!==b.type&&E.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&d.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):D.render(b.data.color,!1,b.onload)}function x(a){G.dispatch("resize",a)}function w(a){c.selectThumbnail(a,S)}function u(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function A(a){var b=E.getCurrentItem(),c={type:"click"};c.$declarativeParent=
a;c.data=b;return c}var D,L,G,E,S;return function(c,d,h){D=this;L=c;G=d;E=h;S=b("#imageBlock #altImages ul");var k=b("#imageBlock .canvas"),H=b("#main-image-container"),K;D.subViews=[];for(d=0;d<f.length;d++)D.subViews.push(new f[d](c,h,D,G));D.render=function(a,c,d){var e=0;S.find(".item").remove();a=a||E.getCurrentItem().color;b.each(D.subViews,function(b,f){e=f.render(a,e,k,S,H,c,d)||e});var f=S.find(".a-button-selected").closest(".a-declarative");K=A(f)};D.init=function(){S=b("#imageBlock #altImages ul");
var c=S.find(".a-button-selected").closest(".a-declarative"),d=c.data("action"),c=c.data(d)||{};c.color=L.landingAsinColor||L.defaultColor;G.dispatch("updateModel",{data:c});D.render(c.color,!0);L.isDebug&&v.console&&console.log(L);G.register("updateView",y);G.register("selectThumbnail",w);L.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],g);a.declarative("thumb-action",["click"],g);a.declarative("main-image-click",["click"],p);a.declarative("main-image-click",["mouseenter",
"mouseleave"],q);a.declarative("button-360-click",["click"],r);b(v).resize(x)};D.update=function(a){b.each(D.subViews,function(b,c){c.update(a)});L.usePeekHover&&("mouseleave"===a.type?G.dispatch("updateSelection",K):"click"===a.type&&(K=u(a)||K))}}}var d=["A","jQuery","imageBlockUtils","postMetric"].concat(b.views);y.when.apply(y,d).register("ImageBlockView",function(){for(var a=arguments[0],b=arguments[1],d=arguments[2],f=arguments[3],g=[],n=4,p=arguments.length;n<p;n++)g.push(arguments[n]);return c(a,
b,d,f,g)})});y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(b,a,c,d,e,g,h){function k(b,d,e,f){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var g=C.getCurrentItem();if(!f||"chromeless-video"!==g.type||!S.autoplayVideo){f=0;"image"===g.type&&(f=Math.max(p(g.color,g.variant),0));var h=d+f;h>=e&&(f=0,h=d);d=c.getImageHash(g.color,f,S);-1!==d&&(Q.dispatch("updateModel",
{data:{index:f,thumbnailIndex:h,variant:d.variant,type:"image"}}),d=b.find(".item").get(h),c.selectGivenThumbnail(a(d),b))}}}function m(b,d,e){d=S.colorImages&&S.colorImages[d];var f=b;c.isDefined(d)&&(a.each(d,function(a,d){b<S.maxAlts&&(c.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:d.variant},d.thumb,N,"imageThumbnail"),b++)}),g.isEnabled&&h.logAltImgRequestPlacedOnThumbnails(a,g,C),k(N,f,b,e));return b}function n(b,c){if("image"===b.type){var d=a("#image-canvas-caption #canvasCaption"),
e,f=S.staticStrings,g=S.colorImages,h=b.color,k=b.index;c&&S.useIV?e=f.clickToExpand:g[h]&&g[h][k].hiRes&&S.useHoverZoom?(e=S.useHoverZoomIpad?f.touchToZoom:S.useClickZoom?f.clickToZoom:f.rollOverToZoom,S.hoverZoomIndicator&&(e="<img src='"+S.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):S.useIV&&(e=f.clickToExpand);d.html(e)}}function p(a,b){return c.getIndexForVariant(a,b,S)}function q(b,d){var e;a.each(b.main,function(a,b){c.isDefined(e)||(e=parseFloat(b[1]/b[0])<=parseFloat(S.holderRatio)?"a-stretch-vertical":
"a-stretch-horizontal")});var f="a-dynamic-image "+e,g=c.getMaxDimensionsOfMainImage(b.main,H,S),h=g[0],k=g[1],g=a("<div></div>"),h={"max-height":h,"max-width":k};g.addClass(f).css(h).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",b.main);return g}function r(a){var c=ka.find(".swatchHoverExp");a=q(a);c.find(".imgTagWrapper").html(a);b.loadImageManually(a);return c}function v(a){var b=H.css("height");null!==b&&a.find(".imgTagWrapper").css("height",
b);a.addClass("selected");S.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(S.imgTagWrapperClasses)}function x(a,d){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var f=c.getImageHash(a.color,a.index,S);if(-1===f)return f={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(a,C,S)?A(a,!1,d):(Q.dispatch("updateModel",f),c.showUnavailable(a.color)),-1;var k=ka.find(".item.itemNo"+a.thumbnailIndex);if(!c.isjQueryObjDefined(k)){var k=a.thumbnailIndex,
k=ka.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+k+" maintain-height"),m=q(f,d);k.find(".placeHolder").replaceWith(m);ka.find(".list").append(k);b.loadImageManually(m)}v(k);Q.dispatch("loadMagnifier");n(a);S.useIV&&c.isDefined(f.hiRes)&&k.css("cursor","pointer");a.isUserGenerated&&(k=C.getPreviousItem(),m=a.variant,c.isDefined(m)&&k.thumbnailIndex!==a.thumbnailIndex&&(g.isEnabled&&h.logAltImgRequestServed(g),e.postCountMetric("ImageThumbnailSelectedVariant:"+
m),0===m.indexOf("IG")&&(e.postCountMetric("IGImageSelectedVariant:"+m),e.postCountMetric("IGImageSelectedEvent:"+a.interaction))));b.trigger("dp:image-block:update",f)}}function w(a){var d=Math.max(p(a.color,C.getCurrentItem().variant),0),d=c.getImageHash(a.color,d,S);if(-1===d)return c.lazyLoadingRequired(a,C,S)?c.lazyLoadOnHoverEnabled(S)&&(u(".3",!0),c.spinner(ka,!0),b.delay(function(){C.getCurrentEvent().data===a&&A(a,!0)},500)):c.showUnavailable(a.color),-1;var e=r(d);v(e);b.trigger("dp:image-block:update",
d)}function u(b,c){c?ka.css("opacity",b):a("#imageBlock").css("opacity",b)}function A(a,b,e){K=b;O=e;var g=a.color,h=S.colorToAsin[g];if(h&&h.asin){var k={};k.params={asin:h.asin,productGroupID:S.productGroupID,color:g};k.success=function(d){d?(c.ajaxState(h.asin,"success"),S.colorImages[g]=d.colorImage,c.isDefined(S.spin360ColorEnabled)&&(S.spin360ColorEnabled[g]=d.enable360),g===a.color&&(b&&K?a===C.getCurrentEvent().data&&(D(a),w(a)):(d={type:"updatedData",data:C.getCurrentItem(),onload:e||O},
Q.dispatch("updateView",d))),y.register(c.rankedImagesReadyEvent(h.asin))):c.ajaxState(h.asin,"fail")};k.error=function(){c.ajaxState(h.asin,"fail")};k.indicator=c.spinner(ka);c.ajaxState(h.asin,void 0)&&"fail"!==c.ajaxState(h.asin,void 0)||(u(".3",b),d.load("/gp/product/features/apparel-main-image/ranked-images.html",k),c.ajaxState(h.asin,"sent"));return S.colorImages&&S.colorImages[g]}}function D(b,d){c.lazyLoadingRequired(b,C,S)||(a("#imageBlock").css("opacity","1"),ka.css("opacity","1"),c.spinner(ka,
!1),ka.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),d&&ka.find(".list .item").remove())}function L(){var d=ka.find(".item .imgTagWrapper"),e=c.getContainerHeight(H,S.holderRatio,S.holderMaxHeight);0<e&&(H.height(e),d.height(e));ka.find("img.a-dynamic-image").each(function(){var d=a(this);d.data("a-manual-replacement")&&b.loadDynamicImage(this);var e=d.data("a-dynamic-image"),e=c.getMaxDimensionsOfMainImage(e,H,S);d.css({"max-height":e[0]+
"px","max-width":e[1]+"px"})})}function G(a){n(C.getCurrentItem(),"mouseenter"===a.type)}var E,S,C,Q,N,ka,H,K,O,M;return function(a,b,d,f){E=this;S=a;C=b;Q=f;S.colorImages[S.landingAsinColor]=S.colorImages[S.defaultColor];E.render=function(a,b,d,e,f,g,h){ka=d;N=e;H=f;M=m(b,a,g);g||(a=C.getCurrentItem(),c.lazyLoadingRequired(a,C,S)&&Q.dispatch("updateModel",{data:{type:"lazy-loaded"}}));D(C.getCurrentItem(),!g);x(C.getCurrentItem(),h);return M};E.update=function(a){var b=a.data;C.setCurrentEvent(a);
"ingress"!==b.type&&D(a.data,!1);"swatchHover"===a.type?b.color===C.getCurrentItem().color?x(C.getCurrentItem()):a.captured||-1===w(b)||(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&e.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+M),x(b),S.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,N),"click"===a.type&&e.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+M)))};Q.register("imageHover",
G);Q.register("resize",L)}});y.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(b,a,c,d,e,g){function h(a){u?a.css("cursor","url('"+q.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function k(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(b))for(var b=b[1].split("_"),d=0;d<b.length;d++){var e=
b[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function m(b,m){function n(){var a;m.useClickZoom?(a=m.offsetInClickZoom,a=[Math.min(1,Math.max(0,G[0]-(T[0]+a))/(T[2]-2*a)),Math.min(1,Math.max(0,G[1]-(T[1]+a))/(T[3]-2*a))]):a=K&&K.updatePosition();if(a&&H&&H.detailSize){var b=[H.detailSize[0]-H.rect.width,H.detailSize[1]-H.rect.height];H.detailImage.get(0).style.left=-(a[0]*b[0])+"px";H.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function p(a){var b=
Z?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";G=Z?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function r(a){Z&&a.preventDefault();p(a);m.useClickZoom?a=[T[0],T[1],T[0]+T[2],T[1]+T[3]]:(a=K?K.offset:b.offsetParent().offset(),a=[M[0]+a.left,M[1]+a.top,M[0]+M[2]+a.left,M[1]+M[3]+a.top]);G[0]<a[0]||G[1]<a[1]||G[0]>=a[2]||G[1]>=a[3]?(m.fadeMagnifier?ba||(ba=!0,Aa=setTimeout(function(){w(!0)},500)):m.useClickZoom||w(),ga&&(ga=!1,clearTimeout(na))):(ga||(ga=!0,na=setTimeout(function(){d.postCountMetric("dppc_hoverZoomOpened");
e.isEnabled&&g.logHoverZoomRequestServed(e)},1E3)),m.fadeMagnifier&&ba&&(ba=!1,clearTimeout(Aa)),n())}function w(c){c&&F.suppressMagnifier(!0);if(W&&(H&&H.hide(),K&&(K.destroy(),K=null),W=!1,Z?(b.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),y(),c))b.one("click.magnifier touchstart.magnifier",function(a){x(a,!0)})}function x(c,e){e&&F.suppressMagnifier(!1);
if(!W&&!V&&(0===la&&(d.postCountMetric("dppc_hoverTime",new Date-(v.ue&&v.ue.t0||0)),la=1),oa[X]||(d.postCountMetric("dppc_hoverMain"),oa[X]=1),M=[b.position().left,b.position().top,b.width(),b.height()],X&&(p(c),H?H.refit().show():H=new ra,m.useClickZoom||(K=K||new qa),T=H.getWindowSize(),n()),W=!0,Z?(b.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",r).bind("touchend.magnifier",w),a(document).trigger("engaged.magnifier")):(b.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",
r)),e)){var g=a("#zoomWindow");if(0<g.length)g.one("click.magnifier touchend.magnifier",function(a){w(!0)})}}function y(){m.useHoverZoom&&(Z?b.bind("touchstart.magnifier touchmove.magnifier",x):b.bind("mousemove.magnifier",x))}var F=this,J={detailImageUrl:b.attr("data-old-hires"),location:"over",locationElement:b,prelaod:"ready",zIndex:50,offsetInClickZoom:50};m=a.extend(J,m);m.adjustment=[10,0,-10,0];var H=null,K=null,G=null,M=null,T=null,I={"null":1,"":1,undefined:1},W=!1,V=!1,X=m.detailImageUrl,
Z=m.useHoverZoomIpad||0,la=0,oa={},qa=function(){function c(a){var d=Math.round(Math.min(b.width(),H.rect.width/a));a=Math.round(Math.min(b.height(),H.rect.height/a));k.css({width:d,height:a});e=[d,a]}var d=this,e=[0,0],f=(H.detailSize&&H.detailSize[0]||5E8)/M[2],g=(H.detailSize&&H.detailSize[1]||5E8)/M[3],f=g>f?g:f;a("#magnifierLens").remove();var k=a("<div id='magnifierLens' />").css({backgroundImage:"url("+m.generalImageUrls.zoomLensBackground+")",position:"absolute"});q.showMagnifierOnHover?h(k):
k.css("cursor","pointer");d.updatePosition=function(){var a=[M[2]-e[0],M[3]-e[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(G[0]-e[0]/2-M[0]-d.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(G[1]-e[1]/2-M[1]-d.offset.top)/a[1])),f=M[0]+Math.round(b*a[0]),a=M[1]+Math.round(c*a[1]);k.get(0).style.left=f+"px";k.get(0).style.top=a+"px";return[b,c]};d.destroy=function(){k.remove()};d.offset=b.offsetParent().offset();c(f);d.updatePosition();k.appendTo(b.parent());H.detailImage[0].complete||H.detailImage.load(function(){var a=
H.detailImage.width()/M[2];c(a);d.updatePosition()})};qa.preload=function(){F.preload(m.generalImageUrls.lensBackgroundUrl)};var ra=function(){function d(){var e={};if("over"===m.location){var e=m.useClickZoom,h={},k=a("#leftCol"),n=a("#centerCol"),p=a("#rightCol"),q=a("#hover-zoom-end"),t=a("#actionPanelContainer"),r=c.isjQueryObjDefined(k)?k.outerHeight():n.outerHeight();h.top=c.isjQueryObjDefined(k)?k.offset().top:n.offset().top;h.bottom=r+h.top;h.right=c.isjQueryObjDefined(p)?p.offset().left:
t.offset().left;h.left=e?0:k.offset().left+k.outerWidth();c.isjQueryObjDefined(q)&&q.offset().top>h.bottom&&(h.bottom=q.offset().top);e=h}else"right"===m.location&&(e=b.offset(),e={left:e.left+b.outerWidth(),top:e.top,right:e.left+b.outerWidth()+400,bottom:e.top+400});m.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+a(m.minHeightElement).outerHeight()));e.bottom=Math.min(e.bottom,a(v).scrollTop()+a(v).height());e.left+=g[0];e.top+=g[1];e.right+=g[2];e.bottom+=g[3];e.width=e.right-e.left;e.height=
e.bottom-e.top;m.enhancedHoverOverlay&&c.isDefined(v.pageXOffset)&&(h=a(v).width(),e.width=h-e.left+v.pageXOffset-18,e.height-=14);l.css({left:e.left,top:e.top,width:e.width,height:e.height});f.rect=e;return f}function e(a){var b=new Image;f.detailSize=[0,0];b.onload=function(){f.detailSize=[b.width,b.height];n()};b.src=a.attr("src");if(0<b.width&&0<b.height)f.detailSize=[b.width,b.height];else if(m.detailImageSize)f.detailSize=m.detailImageSize;else{a=k(b.src);var c=M[2]/M[3];a.SS||a.AA?(a=a.SS||
a.AA,f.detailSize=[a,a]):a.SX?f.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?f.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(f.detailSize=1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var f=this,g=m.adjustment;a("#zoomWindow").remove();var h={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:m.zIndex};m.enhancedHoverOverlay&&(h.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",h.border="1px solid #949494",h.borderColor="rgb(148,148,148)");var l=a("<div id='zoomWindow' />").css(h);
m.fadeMagnifier&&l.fadeIn(200);m.useClickZoom&&(u?l.css("cursor",'url("'+m.zoomOutIcon+'"), auto'):(l.css("cursor","-webkit-zoom-out"),l.css("cursor","-moz-zoom-out"),l.css("cursor","zoom-out")));f.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");f.detailImage&&f.detailImage.remove();l.append(b);a(document).trigger("updated.magnifier");f.detailImage=b;e(f.detailImage)};f.refit=function(){d();e(f.detailImage);return f};m.fadeMagnifier?(f.show=function(){l.fadeIn(200);
return f},f.hide=function(){l.fadeOut(200);return f}):(f.show=function(){l.show();return f},f.hide=function(){l.hide();return f});f.destroy=function(){l.remove();return f};f.getWindowSize=function(){return[f.rect.left,f.rect.top,f.rect.width,f.rect.height]};f.updateImage(X);d();l.appendTo(document.body)},ba=!1,Aa,ga=!1,na;F.preload=function(b){b=a.makeArray(b);for(var c=b.length,d=0;d<c;d++)b[d]instanceof Array?F.preload(b[d]):"string"===typeof b[d]&&b[d]&&!I[b[d]]&&(I[b[d]]=new Image,I[b[d]].src=
b[d])};F.changeImage=function(c,d){W&&w();X=d;b.attr("src",c);F.preload(c);M=[b.position().left,b.position().top,b.width(),b.height()];d&&("immediately"===m.preload?F.preload(d,!0):a(v).ready(function(){F.preload(d)}),H?H.updateImage(d):b.attr("data-old-hires",d))};F.destroy=function(){b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");K&&K.destroy();K=null;H&&H.destroy();H=null};F.detailImage=function(){return H.detailImage};
F.suppressMagnifier=function(a){V=a};F.isEngaged=function(){return W};F.engageMagnifier=x;F.disengageMagnifier=w;b[0].complete?y():b.one("load",y);F.preload(b.attr("src"));if(m.preload){var xa=m.detailImageUrl,J=function(){F.preload(xa,!0);m.useClickZoom||qa.preload()},ca=m.preload;ca.constructor!==Array&&(ca=[ca]);for(var fa=0;fa<ca.length;fa++)if("immediately"===ca[fa])J();else if(a(v)[ca[fa]])a(v)[ca[fa]](J);else a(v).bind(ca[fa],J)}return F}function n(){if(q.useHoverZoom){var b={adjustment:[0,
0,1,1],generalImageUrls:q.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:q.useHoverZoomIpad,useHoverZoom:q.useHoverZoom,useClickZoom:q.useClickZoom,fadeMagnifier:q.fadeMagnifier,zoomOutIcon:q.staticImages.zoomOutCur,enhancedHoverOverlay:q.enhancedHoverOverlay};x&&(x.destroy(),x=G);var d=w.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.isjQueryObjDefined(d)?q.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",
function(a){x=new m(d,b);x.engageMagnifier(a,!0)}),u?d.css("cursor",'url("'+q.staticImages.zoomInCur+'"), auto'):(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):x=new m(d,b):e.isEnabled&&g.logHoverZoomApplicability(a,e)}}var p,q,r,y,x,w,u=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){p=this;q=a;r=b;e.refToModel=r;y=d;p.render=function(a,b,c,d,e,f){w=c;x&&(x.destroy(),x=G)};p.update=function(a){};y.register("loadMagnifier",n);y.register("resize",
n)}});y.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(b,a,c,d){function e(a,b,e){a=(a=e?e:c.getColorFromState(b.getState().hovered_variations,k))&&""!==a?a:k.defaultColor;n.dispatch("updateView",{type:"swatchHover",data:{color:a}});d.postCountMetric("swatchHover")}function g(a,b,e,h){a=(a=h?h:c.getColorFromState(b.getState().selected_variations,k))&&""!==a?a:k.defaultColor;a===m.getCurrentItem().color?"function"===typeof e&&e():(n.dispatch("updateSelection",
{type:"swatchClick",data:{color:a},onload:e}),d.postCountMetric("swatchClick"))}var h,k,m,n;return function(a,c,d,f){h=this;k=a;m=c;n=f;b.on("image-block-twister-swatch-hover",e);b.on("image-block-twister-swatch-click",g);h.render=function(a,b,c,d,e){};h.update=function(a){}}});y.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(b,a,c,d,e,g){function h(b,c,e,g){!w.autoplayVideo||M||w.useChromelessVideoPlayer?!d.isjQueryObjDefined(b.find(".a-button-selected"))&&
!d.productReelExperimentEnabled(w)&&(e=u.getCurrentItem(),!g||w.prioritizeVideos||"chromeless-video"===e.type&&w.autoplayVideo)&&(g=d.getVideoHash(e.color,0,w),-1!==g&&(c+=0,A.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:g.variant,type:w.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=b.find(".item").get(c),d.selectGivenThumbnail(a(c),b))):(d.selectGivenThumbnail(b.find("img:last"),b),d.fadeToThumbnail(b.find("img").length-1,E,b))}function k(b){if(!w.useChildVideos)return d.lazyLoadingRequired(u.getCurrentItem(),
u,w)?void 0:w.videos;if(w.colorToVideo[b])return w.colorToVideo[b];var c=w.colorToAsin[b];if(c&&c.asin){var g={};g.params={asin:c.asin,productGroupID:w.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:w.useChromelessVideoPlayer,isUDP:w.isUDP};g.success=function(e){var g=function(){if(e){var c=d.isDefined(w.colorToVideo.initial[0])?d.isDefined(w.colorToVideo.initial[0].banner):!1;w.displayVideoBanner&&c&&(e=a.merge([w.colorToVideo.initial[0]],e));w.colorToVideo[b]=e;c={type:"updatedData",
data:u.getCurrentItem()};A.dispatch("updateView",c)}};w.lazyLoadExperienceDisabled?g():y.when(d.rankedImagesReadyEvent(c.asin)).execute(function(){g()})};e.load("/gp/product/features/apparel-main-image/videos.html",g);return w.colorToVideo&&w.colorToVideo[b]}}function m(){A.dispatch("selectThumbnail",d.productReelExperimentEnabled(w)?1:0)}function n(b,e,h,k){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:e.url,swfUrl:h.swfUrl,foresterMetadataParams:h.foresterMetadataParams,
backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=d.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";g.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){m();g.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){m();g.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){Q.seek(0)}},cuePoints:[{values:e.durationSeconds-
1,type:"position",callback:function(c,d,e){c=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});m();a(this).show().css("opacity",1)})}}]})}function q(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var e=d.getVideoHash(c.color,c.index,w);ka=w.displayVideoBanner&&d.isDefined(e.banner);if(-1===e)return-1;if("chromeful-video"===c.type){c=
E.width()/E.height();var g=parseInt(e.videoWidth,10),h=parseInt(e.videoHeight,10);d.updateAspectRatio(c,g,h,L);Q?(Q.show(),d.loadMediaIntoAiry(Q,e,N)):Q=d.createAiryInstanceForChromeful(L,e,N,null,w.autoplayVideo,E,G,D);b:if(d.productReelExperimentEnabled(w)){if(1<d.getVideosCount(u.getCurrentItem().color,w)){if(d.isDefined(C)){G.show();break b}C=a('<a class="more-videos"></a>').attr("href","#").text(w.staticStrings.watchMoreVideos);G.find("#videoCaption").append(C);b.declarative.create(C,"videoIngressClick",
H)}d.playVideoInImmersiveView(w,u.getCurrentItem().color)&&(b.declarative.create(L,"videoIngressClick",H),L.children().css("z-index","-1"),L.css("display","inline-block"))}else G.find("#videoCaption").text(w.staticStrings.playVideo),G.show();e=Q;w.autoplayVideo&&e&&!M&&(d.toggleVideoCaption(G),e.setVolume(0),e.show(),e.play(),M=!0)}else Q?(Q.show(),d.loadMediaIntoAiry(Q,e,N),Q.play(),G.show()):(Q=n(L,e,N))&&Q.play();ka?d.repositionVideoBanner(E,L,S):S.removeClass("show-banner")}}function t(b,c,e){var m=
k(c);c=b;d.isDefined(m)&&0<m.length&&w.alwaysIncludeVideo&&b===w.maxAlts&&(D.find(".item:last").remove(),b--);d.isDefined(m)&&(a.each(m,function(a,c){if(b<w.maxAlts){var e=w.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",h={type:e,index:a,thumbnailIndex:b,variant:c.variant};H={type:"video-ingress",index:a,thumbnailIndex:b,variant:c.variant};if(w.displayVideoBanner&&w.isLargeSCLVideoThumbnail&&c.banner&&c.wideThumbUrl)d.createThumbnail(h,c.wideThumbUrl,D,T);else if(d.productReelExperimentEnabled(w)&&
"chromeful-video"===e&&(T+=" videoBlockIngress",d.productReelDarkIngressEnabled(w)&&(T+=" videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb",""))),d.createThumbnail(h,c.thumb,D,T),d.productReelExperimentEnabled(w)){r(D.find(".videoBlockIngress img"),w.videoIngressATFSlateThumbURL);var h=1<m.length?"multiple-videos":"one-video",k=1<m.length?m.length+" "+w.staticStrings.multipleVideos:w.staticStrings.singleVideo;k&&D.find(".videoBlockIngress").append(D.find("#videoCount_template").clone().text(k).attr("id",
"videoCount")).addClass(h)}O||(O=!0,g.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(d.productReelExperimentEnabled(w))return!1}),h(D,c,b,e));return b}function r(a,b){var c=a.attr("src");if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function v(a){Q&&Q.pause();a.data=H;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";A.dispatch("imageClick",
a);g.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);g.postCountMetric(b)}var x,w,u,A,D,L,G,E,S,C,Q,N,ka,H,K,O=!1,M=!1,T="videoThumbnail";return function(c,e,h,k){x=this;w=c;u=e;A=k;N=w.airyConfig;w.colorToVideo={};w.colorToVideo[w.landingAsinColor]=w.colorToVideo[w.defaultColor]=w.videos;x.render=function(c,e,g,h,k,l){D=h;L=k.find("#main-video-container");G=L.parent().find("#video-canvas-caption");E=a("#main-image-container");L.parent().find("#banner-outer-container");S=L.parent().find("#image_block_video_banner");
w.useChromelessVideoPlayer||L.addClass("chromeful-container");K=t(e,c,l);q(u.getCurrentItem());d.productReelExperimentEnabled(w)&&b.declarative("videoIngressClick",["click"],v);return K};x.update=function(a){var b=a.data;"ingress"!==b.type&&Q&&(Q.hide(),L.parent().css("z-index",-1),G.hide(),d.isDefined(S)&&S.removeClass("show-banner"));if("swatchHover"===a.type)b.color===u.getCurrentItem().color?q(u.getCurrentItem()):a.captured||d.lazyLoadingRequired(b,u,w)&&!d.lazyLoadOnHoverEnabled(w)&&q(u.getCurrentItem());
else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&g.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+K),q(b),w.usePeekHover&&"click"!==a.type||(d.selectGivenThumbnail(a.$declarativeParent,D),"click"===a.type&&d.productReelDarkIngressEnabled(w)&&(g.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+K),H.action="videoIngressClick",H.clickTimeStamp=a.$event.timeStamp,A.dispatch("videoIngressClick",H),g.postTimeMetric("dpcc_vse_videoingressclick",
a.$event.timeStamp)))}}});y.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(b,a,c,d,e,g,h,k,m,n){function q(a){return a.hiRes||a.large||a.main[a.main.length-1]}function t(){P.find("#ivTitle").click(function(){z.hide()})}function r(a){if(e.productReelExperimentEnabled(U)){var b=P.find("#ivMediaSelect");b.find("option[value='"+
a+"']").attr("selected",!0);b.trigger("change")}}function y(){aa=Da?{type:"360-spin"}:ea.getCurrentItem()}function x(){var a=P.find("#ivStage"),b=z.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-n.getDimension(c,"padding-top")-n.getDimension(c,"padding-bottom");P.css("height",b);var c=P.find("#ivTitle").outerHeight(!0),d=P.find("#ivVariationSelection").outerHeight(!0),e=P.find("#ivMediaSelection").outerHeight(!0),f=P.find("#ivThumbs"),g=n.getDimension(f,"margin-top")+
n.getDimension(f,"margin-bottom");f.css("height",b-c-d-e-g);P.find("#ivLargeImage").css("height",b);a.css("width",P.width()-n.getDimension(P,"padding-left")-n.getDimension(P,"padding-right")-P.find("#ivThumbColumn").width()-n.getDimension(a,"margin-left")-n.getDimension(a,"margin-right"))}function w(){P.find("#ivMediaSelect").change(function(){var a=d(this).val();"all"===a?(P.find("#ivVideoList").hide(),P.find("#ivThumbs").show(),P.find(".ivThumbVideo").show(),"chromeful-video"===aa.type&&P.find("#ivVideo_"+
aa.index).click()):"images"===a?(P.find("#ivVideoList").hide(),P.find("#ivThumbs").show(),P.find(".ivThumbVideo").hide(),"chromeful-video"===aa.type&&(0===ta&&0===Y?P.find("#iv360").click():0===ta?P.find("#ivHeroImage_0").click():P.find("#ivImage_0").click())):"videos"===a&&(P.find("#ivVideoList").show(),P.find("#ivThumbs").hide(),"chromeful-video"!==aa.type?P.find("#ivVideoList_0").click():P.find("#ivVideoList_"+aa.index).click())})}function u(){var a=P.find("#ivStage").find("#ivLargeImage"),b=a.width(),
c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),h=f*g,k=e*g;1>g?(nb?a.css("cursor","url('"+U.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),La=!0):La=!1;e=Math.min(k,e);f=Math.min(h-20,f);d.css({"margin-top":(c-f)/
2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");db=!1}function A(a){var b=P.find("#ivLargeImage");b.css("visibility","hidden");b.empty();n.animateStageIn(b);b.append(a);u()}function D(){ia&&ia.pause();P.find("#ivLarge360").css("display","none");P.find("#ivLargeVideo").css("display","none");P.find("#ivLargeImage").css("display","none");ka()}function L(a){D();P.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?e.isDefined(Ga)&&(b=q(Ga[aa.index])):e.isDefined(B)&&
(b=q(B[aa.index]));if(e.isDefined(b)){P.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),g=P.find("#ivLargeImage");n.animateStageOut(g,function(){c.load(function(){A(c)});if(c[0].complete)A(c);else{g.empty();var a=(g.height()-104)/2,b=(g.width()-80)/2;d("<img>").attr("src",U.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(g)}})}}function R(){var a=parseInt(aa.index,10)+1;a>=ha.length||P.find("#ivVideo_"+a).click()}function E(a,b){sa||
(sa=Ua.find("#image_block_video_banner_temp"),sa=sa.clone().removeClass("template").removeClass("aok-hidden").attr("id","immersive_view_video_banner").addClass("show-banner"),sa.find("a").attr("href",encodeURI(b.banner.targetUrl+"?reftag="+b.banner.refTag)),sa.find("img").attr("src",b.banner.logoUrl),sa.find("span").text(b.banner.subtext));var c=P.find("#ivStage");a.addClass("show-banner");sa.addClass("show-banner");sa.appendTo(a);e.repositionVideoBanner(c,a,sa)}function S(){var a;e.isDefined(ha)&&
(a=ha[aa.index]);if(e.isDefined(a)){D();var b=P.find("#ivLargeVideo").css("display","block");ia?(ia.isDetached()&&ia.attach(b[0]),e.loadMediaIntoAiry(ia,a,Ra),ia.show(),ia.play({isAsync:!0}),U.displayVideoBanner&&e.isDefined(a.banner)&&"nobanner"!==a.banner.layout?E(b,a):U.displayVideoBanner&&e.isDefined(sa)&&(sa.removeClass("show-banner"),P.find("#ivLargeVideo").removeClass("show-banner").css({width:"",height:""}))):(ia=e.createAiryInstanceForChromeful(b,a,Ra,"ImmersiveView"),U.displayVideoBanner&&
e.isDefined(a.banner)&&"nobanner"!==a.banner.layout?E(b,a):U.displayVideoBanner&&e.isDefined(sa)&&(sa.removeClass("show-banner"),P.find("#ivLargeVideo").removeClass("show-banner").css({width:"",height:""})),Ra.enableContinuousPlay&&ia.bind("ended",R),ia.play({isAsync:!0}))}}function C(){y();var a;"hero-image"===aa.type?a=P.find("#ivHeroImage_"+aa.index):"image"===aa.type?(a=P.find("#ivImage_"+aa.index),r("all")):"chromeful-video"===aa.type||"chromeless-video"===aa.type?(a=P.find("#ivVideo_"+aa.index),
r("videos")):a="360-spin"===aa.type?P.find("#iv360"):e.isDefined(Ga)?P.find("#ivHeroImage_"+aa.index):P.find("#ivImage_"+aa.index);e.isjQueryObjDefined(a)||(a=P.find("#ivImage_0"));Q(a)}function Q(a){P.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(aa.type="chromeful-video",aa.index=a.attr("id").split("_")[1],S()):a.hasClass("ivHeroImage")?(aa.type="hero-image",aa.index=a.attr("id").split("_")[1],L(aa.type)):a.hasClass("iv360Image")?(aa.type="360-spin",
aa.index=0,N()):(aa.type="image",aa.index=a.attr("id").split("_")[1],L(aa.type))}function N(){D();P.find("#ivLarge360").css("display","block");T();var a=P.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});n.animateStageIn(a)},200);K();h.postCountMetric("dppc_click360");Ka=Date.now()}function ka(){0<Ka&&(H("dppc_duration360",Date.now()-Ka),Ka=0)}function H(a,b){v.ue&&v.ue.count(a,b)}function K(){if(0<Na){var a=P.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function O(a,b){if(Na<a.length){var c=d("<img style='display:block'/>");c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(Na++,1===Na&&(K(),0<Ka&&H("dppc_loadTime360",Date.now()-Ka)),P.find("#iv360Spinner").hide(),c.show(),Ta=5*pa.imageLocations[Math.floor(va/pa.imageLocations[0].length)][va%pa.imageLocations[0].length],O(a,b))};c.attr("src",M(a[Na]))}}function M(a){var b=Math.round(Fa),c=Math.round(Sa);return a.replace(/(\._SP)\d+(,)\d+/,"$1"+b+"$2"+
c)}function T(){var a=P.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",U.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",
display:"block"}).appendTo(a),Ba=!0,I())}function I(){if(e.isDefined(pa.spriteURLs)&&e.isDefined(P)&&Ba&&!Oa){var a=P.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(pa.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",pa.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(U.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);
var b=pa.imageWidth,c=pa.imageHeight,g=a.parent().width(),h=a.parent().height(),k,l,m=0,n=0;b/c>g/h?(k=g,l=Math.round(c/b*k),n=(h-l)/2):(l=h,k=Math.round(b/c*l),m=(g-k)/2);a.css({"margin-left":m,"margin-top":n,width:k,height:l,overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*k+"px");Fa=k;Sa=l;O(pa.spriteURLs,P.find("#image-360-sprites"),0);b=P.find("#ivLarge360");b.bind("mousedown",Z);b.bind("touchstart",W);b.bind("touchmove",V);b.bind("touchend",X);d(document).bind("mousemove",
la);d(document).bind("mouseup",oa);e.isDefined(U.staticImages.grab)&&a.css("cursor","url('"+U.staticImages.grab+"'), auto");Oa=!0}}function W(a){za=!0;Va=a.originalEvent.targetTouches[0].clientX}function V(a){za&&(qa(a.originalEvent.targetTouches[0].clientX-Va),Va=a.originalEvent.targetTouches[0].clientX)}function X(a){za&&(za=!1)}function Z(a){Ca=!0;ua=a.originalEvent.clientX;e.isDefined(U.staticImages.grabbing)&&(a=P.find("#ivLarge360"),a.css("cursor","url('"+U.staticImages.grabbing+"'), auto"),
a.parents(".a-declarative").last().css("cursor","url('"+U.staticImages.grabbing+"'), auto"));return!1}function la(a){Ca&&(qa(a.originalEvent.clientX-ua),ua=a.originalEvent.clientX)}function oa(a){Ca&&(Ca=!1,e.isDefined(U.staticImages.grab)&&(a=P.find("#ivLarge360"),a.css("cursor","url('"+U.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function qa(a){for(a=Ta-=a/Fa*180;0>a;)a+=360;for(;360<a;)a-=360;Ta=a;var b;a=360;for(var c=0;c<Na;c++)for(var d=0;d<pa.imageLocations[c].length;d++){var f=
Math.abs(Ta-5*pa.imageLocations[c][d]);f<a&&(a=f,b=c*pa.imageLocations[0].length+d)}b!==va&&(a=Math.floor(b/pa.imageLocations[0].length),a!==Math.floor(va/pa.imageLocations[0].length)&&(e.isDefined(cb)||(cb=document.createElement("canvas").getContext("2d")),c=P.find("#image-360-sprites").children(),cb.drawImage(c[a],0,0)),a=P.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));va=b;a=b%pa.imageLocations[0].length*-1*Fa;b=-1*Math.floor(b/
pa.imageLocations[0].length)*Sa;c=P.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function ra(){P.delegate(".ivThumb","click",function(){var a=d(this);Q(a)});P.delegate(".ivThumbVideoListOuter","click",function(){P.find(".ivThumbVideoListOuter").removeClass("selected");var a=d(this);a.addClass("selected");aa.type="chromeful-video";aa.index=a.attr("id").split("_")[1];S()})}function ba(){ia&&
!ia.isDetached()&&(Ra.volume=ia.getVolume(),ia.detach(),!document.all||v.atob||document.addEventListener||(ia=null));P.find("#ivLargeImage").empty();ka()}function Aa(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function ga(a){var b=Ma.top-(a.pageY-Pa[1])*ja;a=Aa(Ma.left-(a.pageX-Pa[0])*ja,Ja.left);b=Aa(b,Ja.top);P.find(".fullscreen").css({left:a,top:b})}function na(){P.delegate("#ivLargeImage","click",function(a){if(db)u();else if(La){P.find(".fullscreen").removeAttr("style");if(La){var b=P.find("#ivLargeImage"),
c=b.find(".fullscreen");nb?b.css("cursor","url('"+U.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));db=!0;var d=P.find("#ivLargeImage");Ja.left=d.width()-c.width();Ja.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Pa=[b.offset().left+e,b.offset().top+d];Ma.top=d-c.height()/2;Ma.left=e-c.width()/2;c.css({position:"relative",left:Ma.left,top:Ma.top});ja=Math.max(c.height()/b.height(),c.width()/b.width())}ga(a)}});
P.delegate("#ivLargeImage","mousemove",function(a){db&&ga(a)})}function xa(c){if(e.isImmersiveViewEnabled(U,ea.getCurrentItem().color)){Da=e.isDefined(c)&&"button-360-click"===c.action;k.isEnabled&&m.logImmersiveViewRequestServed(k);h.postCountMetric("dppc_immersiveViewOpened");if(e.isDefined(z))z.show();else{c=d("#auiImmersiveViewDiv");var g=d(v).height()-150,l=d(v).width()-75;z=a.create(c,{name:"immersiveView",activate:"onclick",width:l,height:g,popoverLabel:"ImmersiveView",hideHeader:!0});c.click()}if(bb){P=
d("#ivMain");c=ea.getCurrentItem().color;B=U.colorImages[c];Ga=U.heroImage[c];ha=U.useChildVideos?U.colorToVideo[c]:U.videos;jb=fa()&&U.spin360ColorEnabled[c];pa=fa()?U.spin360ColorData[c]:G;y();wa=Y=ya=ta=0;e.isDefined(Ga)&&(Y=Ga.length);e.isDefined(B)&&(ta=B.length);e.isDefined(ha)&&(ya=ha.length);jb&&(wa=1);n.populateTitle(P.find("#ivTitle"),45,U);n.populateVariationSelection(P.find("#ivVariationSelection"));c=P.find("#ivMediaSelect");0===ta+wa||0===ya?(c.parent().hide(),P.find("#ivThumbs").addClass("noMediaSelection")):
(c.empty(),d("<option/>").attr("value","all").prop("selected",!0).text(U.staticStrings.allMedia+" ("+(Y+ta+wa+ya)+")").appendTo(c),d("<option/>").attr("value","images").text(U.staticStrings.images+" ("+(Y+ta+wa)+")").appendTo(c),d("<option/>").attr("value","videos").text(U.staticStrings.videos+" ("+ya+")").appendTo(c),c.parent().show(),c.val("all"));c=P.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var g=Y+ta+ya+wa,q=l=0;l<g;)for(var p=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),
t=0;3>t&&l<g;t++,l++,q++)if(q<Y){var r=Ga[l].thumb,u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+l).appendTo(p);u.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(r)+'") center no-repeat')}else if(q>=Y&&q<ta+Y)r=B[l-Y].thumb,u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(l-Y)).appendTo(p),u.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(r)+
'") center no-repeat');else if(q>=Y+ta&&q<ta+Y+wa)u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(p),u.find(".ivThumbImage").css("background",'url("'+(e.isDefined(U.staticImages.icon360)?n.getResizedThumbnailURL(U.staticImages.icon360,!0):"")+'") center no-repeat');else if(r=ha[l-ta-Y-wa],u=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(l-ta-Y-wa)).appendTo(p),u.find(".ivThumbImage").css("background",
'url("'+r.thumbUrl+'") center no-repeat'),e.isDefined(r)){var w={position:"triggerTop"},A=P.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");A.find(".ivVideoPopoverTitle").text(r.title);A.find(".ivVideoPopoverDuration").text(r.durationTimestamp);w.inlineContent=A[0];b.declarative.create(u,"a-tooltip",w)}c=P.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();g=c.find(".placeholder");for(l=0;l<ya;l++)q=ha[l],p=g.clone().removeClass("placeholder").appendTo(c),
p.attr("id","ivVideoList_"+l),p.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),p.find(".ivThumbTitle").text(q.title),p.find(".ivThumbDuration").text(q.durationTimestamp);P.find("#ivLarge360").empty();Na=0;Oa=Ba=!1;Ra=U.airyConfig;bb=!1;vb()}}}function ca(a){var b=U.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var f="360"+b.asin,k=Date.now();c.success=function(b){H("dppc_asyncRequestTime360",Date.now()-k);b&&e.isDefined(b.spin360.spin360Model)?(e.ajaxState(f,
"success"),U.spin360ColorData[a]=b.spin360.spin360Model,a===ea.getCurrentItem().color&&(pa=U.spin360ColorData[a],I())):c.error()};c.error=function(){h.postCountMetric("dppc_asyncFailed360");H("dppc_asyncRequestTime360",Date.now()-k);d*=2;16E3>=d?setTimeout(function(){k=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",c)},d):e.ajaxState(f,"fail")};e.ajaxState(f)&&"fail"!==e.ajaxState(f)||(g.load("/gp/product/features/apparel-main-image/360.html",c),e.ajaxState(f,"sent"))}}function fa(){return e.isDefined(U.spin360ConfigEnabled)&&
U.spin360ConfigEnabled}var ma,U,ea,da,z,P,Ga,B,ha,Y,ta,ya,wa,aa,ia,Ra,sa,Ua,pa,jb,Fa,Sa,ua,Va,Da=!1,Ba=!1,Oa=!1,Ta=0,va=0,Ka=0,Ca=!1,za=!1,Na=0,cb,nb=navigator.userAgent.match(/msie|trident/i),bb=!0,db=!1,La=!1,Ja={},Ma={},ja,Pa,vb=b.once(function(){w();ra();na();b.on("a:popover:afterUpdatePosition:immersiveView",x);b.on("a:popover:afterShow:immersiveView",C);b.on("a:popover:afterHide:immersiveView",ba);t()});return function(a,c,g,l){ma=this;U=a;ea=c;k.refToModel=ea;da=l;fa()&&(U.spin360ColorData[U.landingAsinColor]=
U.spin360ColorData[U.defaultColor],U.spin360ColorEnabled[U.landingAsinColor]=U.spin360ColorEnabled[U.defaultColor]);e.isDefined(U.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",n.addStyleCodeToURL(U.staticImages.icon360,"_FMpng_RI_"));ma.render=function(a,c,d,f,g,k){bb=!0;Ua=g;fa()&&U.spin360ColorEnabled[a]&&!e.isDefined(U.spin360ColorData[a])&&(U.spin360ColorData[a]={},ca(a));e.isImmersiveViewEnabled(U,ea.getCurrentItem().color)&&fa()&&U.spin360ColorEnabled[a]&&
(c===U.maxAlts&&(a=f.find(".item.imageThumbnail"),d=f.find(".item.videoThumbnail"),e.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),c--),a=f.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),b.declarative.create(a,"button-360-click"),f.append(a),c++,h.postCountMetric("dppc_display360"));return c};ma.update=function(a){};da.register("imageClick",xa);da.register("button360Click",xa)}});y.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(b,a,c,d,e,g,h,k,m,n){function q(){var a=d("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==d(this).css("display")}).length;a!==L&&(L=a,r())}function r(){var a=u.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-n.getDimension(c,
"padding-top")-n.getDimension(c,"padding-bottom");d("#iv-tab-view-container").css("height",a);1<L?(d("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=d("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=c):d("#iv-tab-view-container ul.iv-tab-views li").parent().hide();d("#iv-tab-view-container .iv-tab-content").css("height",a);b.trigger("dp:image-block:immersive-view:resize")}function y(){b.trigger("dp:image-block:immersive-view:reset")}function F(c){if(e.isImmersiveViewEnabled(w,
u.getCurrentItem().color)){k.isEnabled&&m.logImmersiveViewRequestServed(k);h.postCountMetric("dppc_immersiveViewOpened");e.isDefined(c)&&("button-360-click"===c.action?d("#iv360TabHeading").click():"videoIngressClick"===c.action?(G=c.clickTimeStamp,d("#ivVideosTabHeading").click()):d("#ivImagesTabHeading").click());var g=u.getImmersiveViewModalInstance();if(e.isDefined(g))g.show();else{c=d("#auiImmersiveViewDiv");var g=Math.min(Math.max(d(v).height()-150,540),1080),l=Math.min(Math.max(d(v).width()-
75,990),1980),g=a.create(c,{name:"immersiveView",activate:"onclick",width:l,height:g,popoverLabel:"ImmersiveView",hideHeader:!0});u.setImmersiveViewModalInstance(g);c.click()}D&&(D=!1,E(),b.trigger("dp:image-block:immersive-view:init"))}}var x,w,u,A,D=!0,L=0,G,E=b.once(function(){b.on("a:popover:afterUpdatePosition:immersiveView",q);b.on("a:popover:afterShow:immersiveView",q);b.on("a:popover:afterHide:immersiveView",y)}),S=b.once(function(){var a=d("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",
function(c){var e=a.filter(".iv-active");e.attr("id")!==d(this).attr("id")&&b.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",c);a.removeClass("iv-active");d(this).addClass("iv-active");d("#iv-tab-view-container .iv-tab-content").hide();e=d(this).find("a").attr("data-iv-tab-view");d("#"+e).show();"ivVideosTab"===e&&(c.clickTimeStamp=G||c.timeStamp);b.trigger("dp:ivTabs:"+e+":select",c);h.postCountMetric("dppc_"+e);return!1})});return function(a,b,c,d){x=this;w=a;u=b;k.refToModel=
u;A=d;x.render=function(a,b,c,d,e,f){h.postCountMetric("dpcc_altThumbs_"+b);D=!0};x.update=function(a){};x.getTitle=function(){};x.getVariationSelectionInfo=function(){};S();A.register("imageClick",F);A.register("button360Click",F);e.productReelDarkIngressEnabled(w)&&A.register("videoIngressClick",F)}});y.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(b,a,c){return{load:function(a,c){c=c||{};c.timeout=c.timeout||4E3;b.ajax(a,c)}}});y.when("A","jQuery",
"Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(b,a,c,d,e,g,h,k){function m(a){return null!==a&&"undefined"!==typeof a}function n(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function q(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function r(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=n(a);0<a&&(b=Math.min(b,a));return b}function y(a,
b,c){b=b.height();if(c.naturalMainImageSize)return b;a=q(a);0<a&&(b=Math.min(b,a));return b}function F(b){var c;a.each(b,function(a,b){m(c)||(c=b[1]/b[0])});return c||1}function x(a,b,c){b.fadeTo(500,0,function(){u(a,c);b.fadeTo(500,1)})}function w(a){a&&a.toggle()}function u(b,c){var d=c.find("img");m(d[b])&&a(d[b]).click()}function A(a,b){ka[a]=b?b:ka[a];return ka[a]}function D(b,c,d){d=d||N;d=d.colorImages;if(1>d.length||!m(d[b])||!m(c))return-1;var e=-1;a.each(d[b],function(a,b){b.variant===c&&
(e=a)});return e}function G(b,c,d){d=d||N;d=d.colorImages;return!(m(d)&&m(d[b])&&m(d[b][c])&&m(d[b][c].main))||1>a.map(d[b][c].main,function(a,b){return b}).length?-1:d[b][c]}function R(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function E(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function S(b,c){var d;if(d=b.useIV)d=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;h.isEnabled&&
(h.IVApplicaple=d,k.logImmersiveViewApplicability(a,h));return d}var C,Q,N=a.extend(!0,{},e,g),ka={};return{isDefined:m,isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:F,getMaxHeightOfMainImage:y,getMaxWidthOfMainImage:r,getMaxDimensionsOfMainImage:function(a,b,c){var d=y(a,b,c);b=r(a,b,c);a=F(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(m(d)){a=d.offsetWidth/b;a=Math.min(a,c);var e;b=N.mainImageHeightPartitions;
c=N.mainImageMaxSizes;if(m(c)&&m(b)){for(var f=0,g=v.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)g>b[d]&&(f=d+1);c.length>=f&&(e=c[f])}m(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(b,c){if(b){c=c||N;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,c,d,e){var f=d.find(".template").clone().removeClass("template").addClass("item"),g=document.createElement("img");
g.src=c;f.find(".placeHolder").replaceWith(g);(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&f.addClass("heroImageThumbnail");m(e)&&f.addClass(e);b.declarative.create(f,"thumb-action",a);d.append(f)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,e,g,h,k,l,m,n){var q=a.extend({},g.foresterMetadataParams);
null!==h&&(q.method+="."+h);var p=[];e.disabledViewIds&&(p=e.disabledViewIds);return c.embed({parentElement:b[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:g.swfUrl,foresterMetadataParams:q,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:g.videoAds,bindings:{play:function(){"ImmersiveView"===h?C||(C=!0,d.postCountMetric("dppc_chromefulVideoPlayedIV")):
Q||(Q=!0,d.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,c){k&&(x(0,l,n),w(m))}}],disabledViewIds:p})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),
a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:x,toggleVideoCaption:w,selectThumbnail:u,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();0===d.length&&(d=a("<div></div>").append(a("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)",
"z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:A,getIndexForVariant:D,getImageHash:G,lazyLoadingRequired:function(a,b,c){b=Math.max(D(a.color,b.getCurrentItem().variant,c),0);b=-1!==G(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==A(a);return!c.lazyLoadExperienceDisabled&&
!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:R,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();R(c,16,9,b)},d||0)},productReelExperimentEnabled:E,productReelDarkIngressEnabled:function(a){return E(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!m(c.colorToVideo))return-1;
a=c.colorToVideo[a]}else a=c.videos;return m(a)&&m(a[b])&&m(a[b].url)?a[b]:-1},isImmersiveViewEnabled:S,playVideoInImmersiveView:function(a,b){return S(a,b)&&E(a)}}});y.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(b,a,c,d,e){function g(b,e,h,l){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var m=w.getCurrentItem();if(!l||"chromeless-video"!==m.type||!x.autoplayVideo){l=0;if("hero-image"===m.type){l=k(m.color,
m.variant);if(-1===l)return;l=-1!==l?l:0}var n=e+l;n>=h&&(l=0,n=e);e=d.getHeroImageHash(x,m.color,l);-1!==e&&(u.dispatch("updateModel",{data:{index:l,thumbnailIndex:n,variant:e.variant,type:"hero-image"}}),e=b.find(".item").get(n),c.selectGivenThumbnail(a(e),b))}}}function h(b,d,e){if("hero-video"===w.getCurrentItem().type)return b;d=x.heroImage&&x.heroImage[d];var f=b;c.isDefined(d)&&(a.each(d,function(a,d){b<x.maxAlts&&(c.createThumbnail({type:"hero-image",index:a,thumbnailIndex:b,variant:d.variant},
d.thumb,A,"imageThumbnail"),b++)}),g(A,f,b,e));return b}function k(b,d){var e=x.heroImage;if(1>e.length||!c.isDefined(e[b])||!c.isDefined(d))return-1;var f=-1;a.each(e[b],function(a,b){b.variant===d&&(f=a)});return f}function m(){if(D.length&&x.repositionHeroImage){var a=d.getHeroDimParams(x,w.getCurrentItem()),b;c.isDefined(a)&&(b=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",D.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+
"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function n(a,b,e,g){if(D.length&&a&&b){if("function"===typeof e||g){var h=new Image;h.onload=g?function(){D.css("background-image",'url("'+a+'")')}:e;h.src=a}e=b[1];var h=b[0],k;g||D.css({"background-image":'url("'+a+'")'});x.repositionHeroImage&&(b=d.getHeroDimParams(x,w.getCurrentItem(),b),c.isDefined(b)&&(e=b.width,h=b.height,k=c.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));D.css({"background-position":k,"background-size":e+
"px "+h+"px ","max-width":e+"px ","min-height":h+"px ",filter:"","-ms-filter":""})}}function q(b,c,e,g){b=d.getHeroImageHash(x,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];n(c,b.main[c],e,g)}function r(a,b,c){if("hero-image"!==a.type)return-1;var e=k(a.color,w.getCurrentItem().variant),e=-1!==e?e:0;if(-1===d.getHeroImageHash(x,a.color,e))return-1;var g=w.getCurrentItem();a.thumbnailIndex=g.thumbnailIndex;a.type=g.type;a.variant=g.variant;a.index=e;v(a,b,c)}function v(a,c,e){var g=
d.getHeroImageHash(x,a.color,a.index),h;h=a&&G&&b.equals(a,G)?!0:!1;G||(G=a);if(!h&&a||c)q(a.color,a.index,c,e),G=a;D.removeClass("hide-background");b.trigger("dp:image-block:update",g)}var y,x,w,u,A,D,G={};return function(b,d,e,f){y=this;x=b;w=d;u=f;x.heroImage[x.landingAsinColor]=x.heroImage[x.defaultColor];y.render=function(b,c,d,e,f,g,k){A=e;D=a("#heroImage");b=h(c,b,g);r(w.getCurrentItem(),k,g);return b};y.update=function(a){var b=a.data;"ingress"!==b.type&&D.addClass("hide-background");"swatchHover"===
a.type?a.captured||(b.type=w.getCurrentItem().type,-1!==r(b)&&(a.captured=!0)):"hero-image"===b.type&&(v(b),"click"!==a.type&&x.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,A))};u.register("resize",m)}});y.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(b,a,c,d,e){function g(a){a=m.heroImage[a];var b=0;a&&(b=a.length);return b}function h(a){q.find(".item").eq(a).appendTo(q).addClass("vse-scl-thumbnail")}
var k,m,n,q;return function(a,d,e,f){k=this;m=a;n=f;k.render=function(a,d,e,f,n,r,t){q=f;k=this;e=m.maxAlts;f=d;n=(m.colorImages[a]?m.colorImages[a].length:0)+c.getVideosCount(a,m)+g(a);n>e&&(r=n-e,f=d,n=q.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),r+="+",t={type:"ingress",index:0,thumbnailIndex:f,variant:""},n.find("#altIngressText").append(r),b.declarative.create(n,"thumb-action",t),q.append(n),f=f++);n=c.isDefined(m.videos[0])?
c.isDefined(m.videos[0].banner):!1;m.displayVideoBanner&&m.isLargeSCLVideoThumbnail&&n&&(a=(m.colorImages[a]?m.colorImages[a].length:0)+g(a),a>=e&&m.alwaysIncludeVideo?h(d-1):a<e&&h(a));return f};k.update=function(a){"ingress"===a.data.type&&"click"===a.type&&n.dispatch("imageClick",a)}}});y.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(b,a,c){return function(a,b,d){this.getImageHash=function(b){var e=d.getCurrentItem();b=c.getIndexForVariant(e.color,b||"MAIN",
a);return c.getImageHash(e.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});y.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(b,a,c){function d(a,b){var c;if(b.repositionHeroImage){c=a[1];var e=a[0];if(768>=(v.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,e*=.7;else{var f=((v.innerWidth||document.documentElement.clientWidth||
document.body.clientWidth)-1024)/256,f=Math.max(Math.min(f,1),0);c*=.7+.3*f;e*=.7+.3*f}c=[c,e]}return c}function e(a,b,d){var e;if(d.repositionHeroImage){var f=v.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(c.isDefined(d)){e=Math.max((f-Math.min(1500,a))/2,0);var g=Math.max((f-a)/2,0);e-=g;f=Math.max(Math.min(f,1500),1024);e=e+(f-420-23)/2-a/b[1]*d}}return e}function g(b,d,e){b=b.heroImage;return!(c.isDefined(b)&&c.isDefined(b[d])&&c.isDefined(b[d][e])&&
c.isDefined(b[d][e].main))||1>a.map(b[d][e].main,function(a,b){return b}).length?-1:b[d][e]}return{getHeroImageHash:g,getHeroDimParams:function(b,k,m){if(b.repositionHeroImage){if(!c.isDefined(m)){m=g(b,k.color,k.index);if(-1===m)return;k=a.map(m.main,function(a,b){return b})[0];m=m.main[k]}k=d(m,b);b=e(k[0],m,b);return{height:k[1],width:k[0],xPos:b,yPos:75}}}}});y.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",
function(b,a,c,d,e,g,h){function k(a,c){var d=b.copy(a);if(h.isDefined(a)&&a.length>c){try{for(var e=-1,f=0;f<a.length;f++){var g=a.charAt(f);if(" "===g||"."===g||"?"===g||";"===g||","===g||":"===g)e=f;if(f===c-4){d=a.substring(0,-1===e?f:e);break}}}catch(k){d=a.substring(0,c-3)}d+="..."}return d}function m(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);
return isNaN(c)?0:c},attachTabSelectHandler:function(a,c){b.on("dp:ivTabs:"+a+":select",c)},attachTabDeselectHandler:function(a,c){b.on("dp:ivTabs:"+a+":deselect",c)},attachImmersiveViewResizeHandler:function(a){b.on("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){b.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:m,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,
"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return m(a,c)},populateVariationSelection:function(b){if(h.isDefined(v.DetailPage)&&h.isDefined(v.DetailPage.StateController)){b.empty();var c=v.DetailPage.StateController.getState(),d=c.variation_label_order,e;for(e in d)if(d.hasOwnProperty(e)){var f=d[e],g=c.selected_variations[f],f=c.variation_display_labels[f];
g&&a("<div/>").addClass("ivVariations").text(f+":"+g).appendTo(b)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(k(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},200,b)}}});y.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(b,a,c,d,e,g,h,k){function m(){var a=S.getCurrentItem().color;
N=E.colorImages[a];Q=E.heroImage[a];ka=H=0;e.isDefined(Q)&&(ka=Q.length);e.isDefined(N)&&(H=N.length)}function n(a){return a.hiRes||a.large||a.main[a.main.length-1]}function q(){var a=C.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),h=f*g,k=
e*g;1>g?(O?a.css("cursor","url('"+E.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),I=!0):I=!1;e=Math.min(k,e);f=Math.min(h-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");T=!1}function r(a){var b=C.find("#ivLargeImage");b.css("visibility","hidden");b.empty();k.animateStageIn(b);b.append(a);q()}function v(a){C.find("#ivLargeImage").css("display","none");C.find("#ivLargeImage").css("display",
"block");var b;"hero-image"===a?e.isDefined(Q)&&(b=n(Q[K.index])):e.isDefined(N)&&(b=n(N[K.index]));if(e.isDefined(b)){C.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),g=C.find("#ivLargeImage");k.animateStageOut(g,function(){c.load(function(){r(c)});if(c[0].complete)r(c);else{g.empty();var a=(g.height()-104)/2,b=(g.width()-80)/2;d("<img>").attr("src",E.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(g)}})}}function y(a){C.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivHeroImage")?K.type="hero-image":K.type="image";K.index=a.attr("id").split("_")[1];v(K.type);h.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(K.index,10)+1)+"_"+(ka+H))}function x(){C.delegate(".ivThumb","click",function(){var a=d(this);y(a)})}function w(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function u(a){var b=V.top-(a.pageY-Z[1])*X;a=w(V.left-(a.pageX-Z[0])*X,W.left);b=w(b,W.top);C.find(".fullscreen").css({left:a,top:b})}function A(){C.delegate("#ivLargeImage",
"click",function(a){if(T)q();else if(I){C.find(".fullscreen").removeAttr("style");if(I){var b=C.find("#ivLargeImage"),c=b.find(".fullscreen");O?b.css("cursor","url('"+E.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));T=!0;var d=C.find("#ivLargeImage");W.left=d.width()-c.width();W.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Z=[b.offset().left+e,b.offset().top+d];V.top=d-c.height()/2;V.left=e-c.width()/2;
c.css({position:"relative",left:V.left,top:V.top});X=Math.max(c.height()/b.height(),c.width()/b.width())}u(a);h.postCountMetric("dpcc_iv_largeImageCLick")}});C.delegate("#ivLargeImage","mousemove",function(a){T&&u(a)})}function D(){C.find("#ivLargeImage").empty()}function G(a){if(M){C=d("#ivMain");m();K=S.getCurrentItem();k.populateTitle(C.find("#ivTitle"),160,E);k.populateVariationSelection(C.find("#ivVariationSelection"));a=C.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var b=
ka+H,c=0,g=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),l=0;4>l&&c<b;l++,c++,g++)if(g<ka){var n=Q[c].thumb,q=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+c).appendTo(h);q.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(n)+'") center no-repeat')}else g>=ka&&g<H+ka&&(n=N[c-ka].thumb,q=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(c-ka)).appendTo(h),q.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(n)+'") center no-repeat'));la();M=!1}a=d("#ivImagesTab").height();C.css("height",a);b=C.find("#ivTitle").outerHeight(!0);c=C.find("#ivVariationSelection").outerHeight(!0);g=C.find("#ivThumbs");h=k.getDimension(g,"margin-top")+k.getDimension(g,"margin-bottom");g.css("height",a-b-c-h);C.find("#ivLargeImage").css("height",a);a=C.find("#ivStage");a.css("width",C.width()-k.getDimension(C,"padding-left")-
k.getDimension(C,"padding-right")-C.find("#ivThumbColumn").width()-k.getDimension(a,"margin-left")-k.getDimension(a,"margin-right"));K=S.getCurrentItem();a="hero-image"===K.type?C.find("#ivHeroImage_"+K.index):"image"===K.type?C.find("#ivImage_"+K.index):e.isDefined(Q)?C.find("#ivHeroImage_"+K.index):C.find("#ivImage_"+K.index);e.isjQueryObjDefined(a)||(a=C.find("#ivImage_0"));y(a)}var R,E,S,C,Q,N,ka,H,K,O=navigator.userAgent.match(/msie|trident/i),M=!0,T=!1,I=!1,W={},V={},X,Z,M=!0,la=b.once(function(){x();
A();k.attachImmersiveViewResizeHandler(G);k.attachTabDeselectHandler("ivImagesTab",D)});return function(a,b,c,e){R=this;E=a;S=b;R.render=function(a,b,c,e,g,h){M=!0;m();0===ka+H?k.hideTabHeading("ivImagesTabHeading"):k.unhideTabHeading("ivImagesTabHeading");1===ka+H?d("#ivThumbs").hide():d("#ivThumbs").show()};R.update=function(a){};k.attachTabSelectHandler("ivImagesTab",G)}});y.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils",
"preLoaderHook","lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(b,a,c,d,e,g,h,k,m,n){function q(){C.delegate(".ivThumb","click",function(){var a=d(this);C.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(Q.type="chromeful-video",Q.index=a.attr("id").split("_")[1])})}function r(){var a=d("#ivVideosTab").height();C.css("height",a);var b=C.find(".vse-video-block");ka=a-k.getDimension(C,"padding-top")-k.getDimension(C,"padding-bottom");b.css({"max-height":a,
overflow:"hidden"});if(T)C.css({"max-width":Math.floor(1.77*ka)});else{var a=C.find(".vse-airy-container"),b=C.find(".vse-ib-metadata"),c=Math.floor(ka-k.getDimension(b,"height")),e=Math.floor(1.77*c);a.css({"max-height":c,"max-width":e});b.css("max-width",e);I&&(a=C.find(".vse-vertical-scroll"),b=k.getDimension(a,"margin-top")+k.getDimension(a,"margin-bottom"),a.css("max-height",ka-b))}}function y(){N&&N.pause();N&&N.pause();W=!1;O=!0;K=null}function F(){N&&N.pause()}function x(a){K=a.clickTimeStamp;
M&&(n.get(b,"#ivVideoBlock",S,la,oa),u());r();W=!0;D()}function w(a){M&&u();W&&D();r()}function u(){C=d("#ivVideoBlock");E.getCurrentItem();Q=E.getCurrentItem();V();M=!1}function A(a){N=a.airy;W&&N.play({isAsync:!0})}function D(){if(N&&(N.play({isAsync:!0,eventTimestamp:K||(new Date).getTime()}),h.postCountMetric("dpcc_vse_videoBlock_video_played"),O)){var a=v.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,h.postTimeMetric("dpcc_vse_vitff",a),O=!1)}}var G,R,E,S,C,Q,N,ka,H,
K,O=!0,M=!0,T=!1,I=!1,W=!1,V=b.once(function(){q();k.attachImmersiveViewResizeHandler(w);k.attachTabDeselectHandler("ivVideosTab",F);k.attachImmersiveViewResetHandler(y)}),X=function(a,b,c){d("#ivVideoBlockSpinner").addClass("aok-hidden");h.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=E.getCurrentItem().color;b=E.getCurrentItem().index;a=e.getVideoHash(a,b,R);N||(N=e.createAiryInstanceForChromeful(d("#ivVideoBlock"),a,R.airyConfig,"ImmersiveView"));T=!0;d("#ivVideoBlock").css({"max-width":1.77*
ka,margin:"0 auto"});W&&T&&N.play({isAsync:!0})},Z=function(a,b,c){M||n.get(a,"#ivVideoBlock",S,la,oa);d("#ivVideoBlockSpinner").addClass("aok-hidden")},la=function(a,b,c){I=!0;r();W&&D()},oa=function(a,b,c){h.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,d,f){G=this;R=a;E=c;G.render=function(a,c,d,f,g,h){a=E.getCurrentItem().color;c=E.getCurrentItem().index;c=e.getVideoHash(a,c,R);H=R.colorToAsin[a].asin;H=e.isDefined(H)?
H:R.mediaAsin;M=!0;-1===c?k.hideTabHeading("ivVideosTabHeading"):(k.unhideTabHeading("ivVideosTabHeading"),S={page:"DetailPage",placement:"ImageBlock",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:H,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:"physicalID"},metadata:{ProductTitle:R.title}},m.get(b,"#ivVideoBlock",S,Z,X))};G.update=function(a){};k.attachTabSelectHandler("ivVideosTab",x);b.on("vseAiry",A)}});y.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(b,a,c,d,e,g,h,k){function m(a){I.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("iv360Image")&&n()}function n(){I.find("#ivLarge360").css("display","none");q();I.find("#ivLarge360").css("display","block");w();var a=I.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});k.animateStageIn(a)},200);y();h.postCountMetric("dppc_click360");
na=Date.now()}function q(){0<na&&(r("dppc_duration360",Date.now()-na),na=0)}function r(a,b){v.ue&&v.ue.count(a,b)}function y(){if(0<fa){var a=I.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function F(a,b){if(fa<a.length){var c=d("<img style='display:block'/>");c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(fa++,1===fa&&(y(),0<na&&r("dppc_loadTime360",Date.now()-na)),I.find("#iv360Spinner").hide(),c.show(),Aa=5*V.imageLocations[Math.floor(ga/
V.imageLocations[0].length)][ga%V.imageLocations[0].length],F(a,b))};c.attr("src",x(a[fa]))}}function x(a){var b=Math.round(Z),c=Math.round(la);return a.replace(/(\._SP)\d+(,)\d+/,"$1"+b+"$2"+c)}function w(){var a=I.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none",
"-mos-user-select":"none"}),d("<img>").attr("src",M.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ra=!0,u())}function u(){if(e.isDefined(V.spriteURLs)&&e.isDefined(I)&&ra&&!ba){var a=I.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(V.staticImages.hint360)&&d("<img>").css({"margin-left":"auto",
"margin-right":"auto",display:"block"}).attr("src",V.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(M.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=V.imageWidth,c=V.imageHeight,g=a.parent().width(),h=a.parent().height(),k,l,m=0,n=0;b/c>g/h?(k=g,l=Math.round(c/b*k),n=(h-l)/2):(l=h,k=Math.round(b/c*l),m=(g-k)/2);a.css({"margin-left":m,"margin-top":n,width:k,height:l,overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*k+"px");
Z=k;la=l;F(V.spriteURLs,I.find("#image-360-sprites"),0);b=I.find("#ivLarge360");b.bind("mousedown",R);b.bind("touchstart",A);b.bind("touchmove",D);b.bind("touchend",L);d(document).bind("mousemove",E);d(document).bind("mouseup",S);e.isDefined(M.staticImages.grab)&&a.css("cursor","url('"+M.staticImages.grab+"'), auto");ba=!0}}function A(a){ca=!0;qa=a.originalEvent.targetTouches[0].clientX}function D(a){ca&&(C(a.originalEvent.targetTouches[0].clientX-qa),qa=a.originalEvent.targetTouches[0].clientX)}
function L(a){ca&&(ca=!1)}function R(a){xa=!0;oa=a.originalEvent.clientX;e.isDefined(M.staticImages.grabbing)&&(a=I.find("#ivLarge360"),a.css("cursor","url('"+M.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+M.staticImages.grabbing+"'), auto"));return!1}function E(a){xa&&(C(a.originalEvent.clientX-oa),oa=a.originalEvent.clientX)}function S(a){xa&&(xa=!1,e.isDefined(M.staticImages.grab)&&(a=I.find("#ivLarge360"),a.css("cursor","url('"+M.staticImages.grab+
"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function C(a){for(a=Aa-=a/Z*180;0>a;)a+=360;for(;360<a;)a-=360;Aa=a;var b;a=360;for(var c=0;c<fa;c++)for(var d=0;d<V.imageLocations[c].length;d++){var f=Math.abs(Aa-5*V.imageLocations[c][d]);f<a&&(a=f,b=c*V.imageLocations[0].length+d)}b!==ga&&(a=Math.floor(b/V.imageLocations[0].length),a!==Math.floor(ga/V.imageLocations[0].length)&&(e.isDefined(ma)||(ma=document.createElement("canvas").getContext("2d")),c=I.find("#image-360-sprites").children(),
ma.drawImage(c[a],0,0)),a=I.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ga=b;a=b%V.imageLocations[0].length*-1*Z;b=-1*Math.floor(b/V.imageLocations[0].length)*la;c=I.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function Q(){I.delegate(".ivThumb","click",function(){var a=d(this);m(a)})}function N(){q()}function ka(a){if(U){I=
d("#ivMain360");a=T.getCurrentItem().color;X=K()&&M.spin360ColorEnabled[a];V=K()?M.spin360ColorData[a]:G;T.getCurrentItem();X&&(W=1);k.populateTitle(I.find("#ivTitle360"),160,M);k.populateVariationSelection(I.find("#ivVariationSelection360"));a=I.find("#ivThumbs360");a.find(".ivRow").not(".placeholder").remove();for(var b=W,c=0,g=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),l=0;3>l&&c<b;l++,c++,g++)g<W&&a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id",
"iv360").appendTo(h).find(".ivThumbImage").css("background",'url("'+(e.isDefined(M.staticImages.icon360)?k.getResizedThumbnailURL(M.staticImages.icon360,!0):"")+'") center no-repeat');I.find("#ivLarge360").empty();fa=0;U=ba=ra=!1;ea();U=!1}a=d("#iv360Tab").height();I.css("height",a);b=I.find("#ivTitle360").outerHeight(!0);c=I.find("#ivVariationSelection360").outerHeight(!0);g=I.find("#ivThumbs360");h=k.getDimension(g,"margin-top")+k.getDimension(g,"margin-bottom");g.css("height",a-b-c-h);a=I.find("#ivStage360");
a.css("width",I.width()-k.getDimension(I,"padding-left")-k.getDimension(I,"padding-right")-I.find("#ivThumbColumn360").width()-k.getDimension(a,"margin-left")-k.getDimension(a,"margin-right"));T.getCurrentItem();a=I.find("#iv360");e.isDefined(a)&&0!==I.height()&&(e.isjQueryObjDefined(a)||(a=I.find("#ivImage_0")),m(a))}function H(a){var b=M.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var f="360"+b.asin,k=Date.now();c.success=function(b){r("dppc_asyncRequestTime360",Date.now()-k);
b&&e.isDefined(b.spin360.spin360Model)?(e.ajaxState(f,"success"),M.spin360ColorData[a]=b.spin360.spin360Model,a===T.getCurrentItem().color&&(V=M.spin360ColorData[a],u())):c.error()};c.error=function(){h.postCountMetric("dppc_asyncFailed360");r("dppc_asyncRequestTime360",Date.now()-k);d*=2;16E3>=d?setTimeout(function(){k=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",c)},d):e.ajaxState(f,"fail")};e.ajaxState(f)&&"fail"!==e.ajaxState(f)||(g.load("/gp/product/features/apparel-main-image/360.html",
c),e.ajaxState(f,"sent"))}}function K(){return e.isDefined(M.spin360ConfigEnabled)&&M.spin360ConfigEnabled}var O,M,T,I,W,V,X,Z,la,oa,qa,ra=!1,ba=!1,Aa=0,ga=0,na=0,xa=!1,ca=!1,fa=0,ma,U=!0,ea=b.once(function(){Q();k.attachImmersiveViewResizeHandler(ka);k.attachTabDeselectHandler("iv360Tab",N)});return function(a,c,g,l){O=this;M=a;T=c;K()&&(M.spin360ColorData[M.landingAsinColor]=M.spin360ColorData[M.defaultColor],M.spin360ColorEnabled[M.landingAsinColor]=M.spin360ColorEnabled[M.defaultColor]);e.isDefined(M.staticImages.icon360)&&
d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",k.addStyleCodeToURL(M.staticImages.icon360,"_FMpng_RI_"));O.render=function(a,c,g,l,m,n){U=!0;K()&&M.spin360ColorEnabled[a]?(e.isDefined(M.spin360ColorData[a])||(M.spin360ColorData[a]={},H(a)),d("#ivThumbs360").hide(),k.unhideTabHeading("iv360TabHeading")):k.hideTabHeading("iv360TabHeading");e.isImmersiveViewEnabled(M,T.getCurrentItem().color)&&K()&&M.spin360ColorEnabled[a]&&(c===M.maxAlts&&(a=l.find(".item.imageThumbnail"),
g=l.find(".item.videoThumbnail"),e.isDefined(g)&&1<g.length?g.last().remove():a.last().remove(),c--),a=l.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),b.declarative.create(a,"button-360-click"),l.append(a),c++,h.postCountMetric("dppc_display360"));return c};O.update=function(a){};k.attachTabSelectHandler("iv360Tab",ka)}});var r=v.location.host,d={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},
g=r.split(".")[1],q=-1===r.indexOf(".proxy.amazon.com")?"/vap/ew/":d[g]!==G?d[g]:"https://www.amazon.com/vap/ew/";y.when("postMetric").register("preLoaderHook",function(b){function a(c,d){var e=c.A,g=c.block,h=c.request,k=c.handleFailure,m=c.handleSuccess,n=d,p=e.$;d--;var r=n-d-1,v=(new Date).getTime();e.ajax(q+"componentbuilder",{params:h,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:h.timeout||4E3,success:function(a){var c=(new Date).getTime()-v;b.postTimeMetric("vse_preLoaderHook:success:",
c);b.postCountMetric("vse_preLoaderHook:success:"+h.page+":"+h.placement+":"+r);p(g).html(a);m(e,h,a)},error:function(g){(0===g.http.status||500<=g.http.status&&599>=g.http.status)&&0<d?(b.postCountMetric("vse_preLoaderHook:error:"+h.page+":"+h.placement+":"+r),a(c,d)):k(e,h,g)}})}return{get:function(b,d,e,g,h){a({A:b,block:d,request:e,handleFailure:h,handleSuccess:g},3)}}});y.when("postMetric").register("lazyLoaderHook",function(b){function a(c,d,e){var g=c.A,h=c.context,k=c.handleFailure,m=c.handleSuccess;
d.attr("data-configuration");var n=atob(d.attr("data-configuration")),p=JSON.parse(n),n=e,r={pageContext:h,configuration:p},v=(new Date).getTime();e--;var y=n-e-1;g.ajax(q+"subcomponent/"+p.type,{params:r,paramsFormat:"json",method:"post",contentType:"application/json",timeout:h.timeout||4E3,success:function(a){var c=(new Date).getTime()-v;b.postTimeMetric("vse_lazyLoaderHook:success:",c);b.postCountMetric("vse_lazyLoaderHook:success:"+h.page+":"+h.placement+":"+p.type+":"+y);d.html(a);m(g,r,a)},
error:function(m){(0===m.http.status||500<=m.http.status&&599>=m.http.status)&&0<e?(b.postCountMetric("vse_lazyLoaderHook:error:"+h.page+":"+h.placement+":"+p.type+":"+y),a(c,d,e)):k(g,r,m)}})}return{get:function(b,d,e,g,h){var k=b.$;k(d+" div[data-configuration]").each(function(){a({A:b,context:e,handleFailure:h,handleSuccess:g},k(this),3)})}}})});