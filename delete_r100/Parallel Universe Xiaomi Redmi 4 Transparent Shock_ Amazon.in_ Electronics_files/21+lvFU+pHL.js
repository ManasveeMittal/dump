(function(l){var n=window.AmazonUIPageJS||window.P,p=n._namespace||n.attributeErrors,e=p?p("DetailPageTwisterViewAsset"):n;e.guardFatal?e.guardFatal(l)(e,window):e.execute(function(){l(e,window)})})(function(l,n,p){l.when("A","dp-refresh-handler","view-util","twister-string-constants").register("page-refresh-view",function(e,k,h,f){var b=e.$;return function(d,g,c){function a(a){return{chunk:function(a){var d=a.ASIN,c=a.Value;a=a.FeatureName;if(!t.hiddenFeatures[a]){var g,m;try{a&&c&&c.content&&(m=
c.content[a],"undefined"!==typeof m&&(g=b("#"+a),g.html(m),g.css({opacity:""})))}catch(f){a=a||"NoFeatureName",B.logFatal(f,{message:"Error in feature"+a})}t.twisterRefreshHandler.stampFeature(a,d)}},success:function(a,d,b){G("twisterUpdateSuccess")},error:function(a,d,b){Twister.$("#variations-overlay").hide();G("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(a){B.logFatal("Ajax aborted: "+a)},timeout:4E4}}function q(a,
d,b,c,g){var m={},f=[];"parent"===a?(m=v(d,c,"parent",g),f.parent=m,m=v(b,c,"partial",g),f.partial=m):(m=v(b,c,a,g),f[a]=m);return f}function m(a,d,c,g,m){for(var f in a)if(a.hasOwnProperty(f)){if("full"===f){var e=c.dimensionType,q=t.twisterUtil.getDimensionInfo().length;t.twisterRefreshHandler.startMeasurement(c.newAsin,e,q,c.dimensionDisplayType)}e=a[f].twisterRefreshParams;q=a[f].notifyClientParams;m&&(b(t.config[f].affectedFeatures).css({opacity:.5}),t.twisterRefreshHandler.doPageRefresh(null,
e,d,g));z(q.asin,q.id,f,m)}}function w(){b.each(g.contextMetaData,function(a,d){var c={},g=d.elementList||[],m=g.length,f=[];c.click={};c.mouseOver={};for(var e=0;e<m;e++){var q=b("#"+g[e].divToUpdate);f.push("#"+g[e].divToUpdate);q.length&&g[e].customClientFunction&&(g[e].updateOnHover&&(c.mouseOver[g[e].divToUpdate]=q.attr("customfunctionname")),c.click[g[e].divToUpdate]=q.attr("customfunctionname"))}t.config[a].affectedFeatures=f.join(",");t.config[a].clientFeatures=c})}function z(a,d,c,g){var m=
"",m=g?f.EVENT_TYPE_CLICK:f.EVENT_TYPE_MOUSEOVER;b.each(t.config[c].clientFeatures[m],function(b,c){try{var g=function(){t.twisterRefreshHandler.stampImageLoad(a)};(function(){var a={};a.P=l;(function(){eval("var P = this.P;");var a=p,a=eval("0, "+c);a(d,DetailPage.StateController,g)}).call(a)})()}catch(m){B.logFatal("Client feature - "+b+", threw and exception :- "+m)}})}function v(a,d,b,c){var g={},m={};g.asinList=a;g.id="parent"===b?a:"partial"===c?d:a;g.mType=b;g=u(b,g);b=!1;(c=e.state("pwState"))&&
(b=c.isTryState);b&&(g.isTryState=b);g=t.twisterRefreshHandler.createCustomParamsMap({},g);m.asin=a;m.id=d;return{twisterRefreshParams:g,notifyClientParams:m}}function u(a,d){b.each(g.contextMetaData[a].mTypeSpecificURLParams,function(a,b){d[a]=b});return d}function A(a){a=t.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(a.selected_variation_values);t.twisterUtil.isFullySelected(a)?t.currentPageSelectionState="full":t.currentPageSelectionState="partial"}function C(a){var d={};a=a.twisterUpdateURLInfo.immutableURLPrefix;
a+="&isFlushing=2&dpEnvironment="+Twister.dpEnvironment;d.pageRefreshUrl=a;return d}function y(a){var d={};d.config=a.measurement;d.dimensionDisplayType=a.dimensionsDisplayType;d.storeID=a.storeID;d.productGroupID=a.productGroupID;return d}function x(a,d){var b;"partial"===a&&"partial"===d&&(b="partial");"partial"===a&&"full"===d&&(b="full");"full"===a&&"partial"===d&&(b="parent");"full"===a&&"full"===d&&(b="full");return b}var t=this,r=n.ue,F="",B=new c("dpTwisterPageRefreshView");this.twisterUtil=
d.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};t.viewUtil=new h(d);t.subType;var G=function(a){r&&r.count&&r.count(a,(r.count(a)||0)+1)};(function(){A(g);w();var b={featureName:t.twisterFeatureName},c=C(g),e=y(g);t.twisterRefreshHandler=new k(b,c,e);d.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(d,
b){var c={};if(d!==f.METADATA){var c={},e=p;if(b)switch(d){case f.VARIATION_CHANGE:e=b.selected().selInfo;break;case f.VARIATION_PEEK:e=b.peek().selInfo}c.selectionInfo=e;c.childAsin=t.twisterUtil.getAsinFromSelectionInfo(c.selectionInfo);c.newAsin=c.childAsin;c.dimensionCombination=t.viewUtil.getCurrDimCombId(c.selectionInfo,"_","X");c.newPageSelectionState=t.twisterUtil.isFullySelected(c.dimensionCombination)?"full":"partial";c.mTypeForRefresh=x(t.currentPageSelectionState,c.newPageSelectionState);
c.doNotAbort="parent"===c.mTypeForRefresh?!0:!1;c.twisterCallListParams=q(c.mTypeForRefresh,c.newAsin,c.childAsin,c.dimensionCombination,c.newPageSelectionState);c.optionsForTwisterRefresh=a(b);c.pageRefreshMeasure={newAsin:c.newAsin,dimensionType:F,dimensionDisplayType:g.dimensionsDisplayType}}switch(d){case f.VARIATION_CHANGE:t.subType!==f.PRODUCTIZED_VIEW_SUBTYPE&&(m(c.twisterCallListParams,c.optionsForTwisterRefresh,c.pageRefreshMeasure,c.doNotAbort,!0),t.currentPageSelectionState=c.newPageSelectionState,
t.subType=p);break;case f.VARIATION_PEEK:m(c.twisterCallListParams,c.optionsForTwisterRefresh,c.pageRefreshMeasure,c.doNotAbort,!1);t.currentPageSelectionState=c.newPageSelectionState;break;case f.METADATA:switch(b.subType){case f.DP_STATE_VIEW_SUBTYPE:F=b.divMetadata.dimDisplayType;break;case f.PRODUCTIZED_VIEW_SUBTYPE:t.subType=b.subType,c.dimensionCombination=b.newDimCombID,c.childAsin=b.childAsin,c.newAsin=b.newAsin,c.newPageSelectionState=t.twisterUtil.isFullySelected(c.dimensionCombination)?
"full":"partial",c.mTypeForRefresh=x(t.currentPageSelectionState,c.newPageSelectionState),c.doNotAbort="parent"===c.mTypeForRefresh?!0:!1,c.twisterCallListParams=q(c.mTypeForRefresh,c.newAsin,c.childAsin,c.dimensionCombination,c.newPageSelectionState),c.optionsForTwisterRefresh=a(b),c.pageRefreshMeasure={newAsin:c.newAsin,dimensionType:b.divMetaData?b.divMetaData.dimDisplayType:p,dimensionDisplayType:g.dimensionsDisplayType},m(c.twisterCallListParams,c.optionsForTwisterRefresh,c.pageRefreshMeasure,
c.doNotAbort,!0),t.currentPageSelectionState=c.newPageSelectionState}}}})})()}});l.when("A","twister-util","ready").execute(function(e,k){var h=n.ue;if(e.state("dimensionKeyList")!==p)for(var f in e.state("dimensionKeyList").dimensionKeys)f!==p&&(e.on("a:popover:beforeShow:mobile-twister_"+f,function(b){e.state("twisterInteractability")===p&&h&&"function"===typeof h.count&&h.count("Twister:blankTwisterSecView",(h.count("Twister:blankTwisterSecView")||0)+1)}),e.on("a:popover:beforeHide:mobile-twister_"+
f,function(b){if(b&&b.popover){b=b.popover.getContent();var d=0<b.find(".aw-twister-row:first").length;b&&!d&&h&&"function"===typeof h.count&&h.count("blankTwisterSecondaryView",(h.count("blankTwisterSecondaryView")||0)+1)}}))});l.when("A").register("twister-bottom-sheet-container",function(e){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(k){this.sheetViewInstance=k;e.trigger("dp:sheet:twister:initialized")}}})});