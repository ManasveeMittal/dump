if(!PULSE)var PULSE={};PULSE.CLIENT||(PULSE.CLIENT={}),PULSE.CLIENT.CRICKET||(PULSE.CLIENT.CRICKET={}),PULSE.CLIENT.CRICKET.Poll=function(t,n,o){this.$container=$(t),this.$pollContainer=this.$container,this.$pollButton=$(".js-poll-btn"),this.tournament=o,this.$pollTournamentName=this.$pollContainer.find(".pulsePollTournamentName"),this.$pollTournamentName.html(this.tournament.fullName),this.poll=new PULSE.CLIENT.Poll.ListView(this.$pollContainer,{name:this.tournament.tournamentName+"_poll",templates:{questions:"question-list",question:"question",answers:"question-breakdown"},feedOptions:{start:!0,interval:30,url:this.tournament.tournamentUrlGenerator.makePollDataUrl(this.customer)},backwardsCompatible:!0,cookieOptions:{path:"/"}},this.tournament);var l=this;this.$pollContainer.on("poll/data",function(t,n){l.updateQuestionCount()}),this.$pollContainer.on("poll/answer",function(t,n){l.updateQuestionCount()}),this.$pollButton.on("click",function(t){l.$pollContainer.hasClass("open")||l.poll.refresh(),l.$pollContainer.prev().toggleClass("open"),l.$pollContainer.toggleClass("open"),t.preventDefault(),t.stopPropagation()})},PULSE.CLIENT.CRICKET.Poll.prototype.updateQuestionCount=function(){var t=this.poll.controller.model.getQuestions("unanswered");t.length?(this.$pollButton.find(".pulse-poll-btn__num").text(t.length),this.$pollButton.find(".pulse-poll-btn__num").show()):this.$pollButton.find(".pulse-poll-btn__num").hide()},window.WidgetController.init("poll",PULSE.CLIENT.CRICKET.Poll);