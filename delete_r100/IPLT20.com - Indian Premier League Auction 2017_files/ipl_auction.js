if(PULSE.app.templates["limelight-player"]=_.template('<figure class="videoWrapper"> <object type="application/x-shockwave-flash" id="limelight_player_500767" name="limelight_player_500767" class="LimelightEmbeddedPlayerFlash" data="//assets.delvenetworks.com/player/loader.swf"> <param name="movie" value="//assets.delvenetworks.com/player/loader.swf"> <param name="wmode" value="window"> <param name="allowScriptAccess" value="always"> <param name="allowFullScreen" value="true"> <param name="flashVars" value="deepLink=true&amp;mediaId=<%= limelight_video_id %>&amp;playerForm=65dd3d09c26a46b5b957b4c3fd7b623d"> </object> <script>LimelightPlayerUtil.initEmbed("limelight_player_500767");</script> </figure>'),PULSE.app.templates["live-header-info"]=_.template('<div class="auction-header__stats"> <div class="auction-header__stat-container col-4 col-12-tab"> <h2 class="auction-header__stat-label">Players sold</h2> <span class="auction-header__stat-value"><%= header.totalSold %></span> </div> <div class="auction-header__stat-container col-4 col-12-tab"> <h2 class="auction-header__stat-label">Overseas Players</h2> <span class="auction-header__stat-value"><%= header.overseas %></span> </div> <div class="auction-header__stat-container col-4 col-12-tab"> <h2 class="auction-header__stat-label">Total Spent</h2> <span class="auction-header__stat-value"><%= header.currency || \'₹\' %><%= header.totalSpent %></span> </div> </div> <% if( typeof player !== "undefined" ) { %> <div class="container auction-header__most-expensive col-12"> <div class="auction-header__most-expensive-container"> <div class="auction-header__most-expensive-inner-content"> <i class="auction-header__team-abbr tLogo70x <%= team.cssClass %> u-hide-phablet"></i> </div> <div class="auction-header__most-expensive-inner-content"> <i class="auction-header__team-abbr tLogo50x <%= team.cssClass %> u-show-phablet"></i> </div> <div class="auction-header__most-expensive-inner-content"> <h3 class="auction-header__most-expensive-label">Most Expensive Player</h3> </div> <div class="auction-header__most-expensive-inner-content"> <h2 class="auction-header__player-name"><%= player.player_name %></h2> </div> <div class="auction-header__most-expensive-inner-content"> <span class="auction-header__player-price"><%= player.hammer_price_text || \'\' %></span> </div> </div> </div> <% } %>'),PULSE.app.templates["overview-teams-list"]=_.template('<table class="l-four-column" border="0"> <thead> <tr class="header"> <td class="first team">Team</td> <td class="funds">Funds Remaining</td> <td style="display:none">Rights to Match</td> <td>Overseas Players</td> <td class="last">Total Players</td> </tr> </thead> <tbody> <% _.each( teamsArray, function( team, index ) { %> <tr> <td class="first team"> <% if( team.link ) { %> <a href="<%= team.link %>"> <div class="auction-table__logo tLogo16x30 <%= team.cssClass %>"></div> <span class="auction-table__team-text u-hide-phablet"><%= team.name %></span> <span class="auction-table__team-text u-show-phablet"><%= team.abbreviation %></span> </a> <% } else { %> <div class="auction-table__logo tLogo16x30 <%= team.cssClass %>"></div> <span class="auction-table__team-text u-hide-phablet"><%= team.name %></span> <span class="auction-table__team-text u-show-phablet"><%= team.abbreviation %></span> <% } %> </td> <td class="funds"><%= team.budgetLeft %></td> <td style="display:none"><%= team.rtmLeft %></td> <td class="overseasPlayers"><%= team.overseasPlayers %></td> <td class="last totalPlayers"><%= team.totalPlayers %></td> </tr> <% } ); %> </tbody> </table> <p class="auction-table__rules"> <span>Maximum overseas players: <strong><%= max_constraints.overseas %></strong></span> <span>Maximum squad size: <strong><%= max_constraints.total %></strong></span> </p>'),PULSE.app.templates.photostream=_.template('<% _.each( photos, function( photo, i ) { %> <li data-ordinal="<%= photo.idx %>" class="photoThumb <%= i === 0 ? \'first\' : \'\' %>"><a href="#"><img alt="<%= photo.caption %>" src="<%= photo.thumb %>"></a></li> <% } ); %>'),PULSE.app.templates["post-header-info"]=_.template('<div class="auction-header__stats"> <div class="auction-header__stat-container"> <h2 class="auction-header__stat-label">Players sold</h2> <span class="auction-header__stat-value"><%= totalSold %></span> </div> <div class="auction-header__stat-container"> <h2 class="auction-header__stat-label">Overseas Players</h2> <span class="auction-header__stat-value"><%= overseas %></span> </div> <div class="auction-header__stat-container"> <h2 class="auction-header__stat-label">Total Spent</h2> <span class="auction-header__stat-value"><%= currency || \'₹\' %><%= totalSpent %></span> </div> </div> <div class="container auction-header__most-expensive"> <div class="auction-header__most-expensive-container"> <div class="auction-header__most-expensive-inner-content"> <i class="auction-header__logo tLogo70x <%= mostExpensive.whoGot %> u-hide-phablet"></i> </div> <div class="auction-header__most-expensive-inner-content"> <i class="auction-header__logo tLogo50x <%= mostExpensive.whoGot %> u-show-phablet"></i> </div> <div class="auction-header__most-expensive-inner-content"> <h3 class="auction-header__most-expensive-label">Most Expensive Player</h3> </div> <div class="auction-header__most-expensive-inner-content"> <h2 class="auction-header__player-name"><%= mostExpensive.name %></h2> </div> <div class="auction-header__most-expensive-inner-content"> <span class="auction-header__player-price"><%= currency || \'₹\' %><%= mostExpensive.price %></span> </div> </div> </div>'),PULSE.app.templates["sold-players-list"]=_.template('<% _.each( teamArray, function( team, index ) { %> <% if( team.players.length ) { %> <div class="auction-table__table-cntr"> <div class="auction-table__table-title"> <h1> <div class="tLogo16x30 <%= team.cssClass %>"></div> <%= team.name %> </h1> </div> <table class="l-three-column" border="0"> <thead> <tr class="header"> <td class="first player">Player</td> <td class="middle type">Type</td> <td class="last">Price Paid</td> </tr> </thead> <tbody> <% _.each( team.players, function( player, index ) { %> <tr> <td class="first player"><%= player.name %></td> <td class="middle type"><%= player.type %></td> <td class="last"><%= player.hammerPrice %></td> </tr> <% } ); %> </tbody> </table> </div> <% } %> <% } ); %>'),PULSE.app.templates["to-be-auctioned-list"]=_.template('<% _.each( modelArrays, function( group, index ) { %> <% if( group.modelArray.length ) { %> <div class="auction-table__table-cntr"> <div class="auction-table__table-title"><h1><%= group.name %></h1></div> <table class="l-three-column" border="0"> <thead> <tr class="header"> <td class="first player">Player</td> <td class="middle type">Type</td> <td class="last">Base Price</td> </tr> </thead> <tbody> <% _.each( group.modelArray, function( player, index ) { %> <tr> <td class="first player"><%= player.name %></td> <td class="middle type"><%= player.type %></td> <td class="last"><%= player.reservePrice %></td> </tr> <% } ); %> </tbody> </table> </div> <% } %> <% } ); %> <% if( is_archive ) { %> The auction has concluded. Thanks for participating. <% } %>'),PULSE.app.templates["top-buys-list"]=_.template('<% if( playersArray.length ) { %> <div class="auction-table__table-title"><h1>Top Buys</h1></div> <table class="l-four-column" border="0"> <thead> <tr class="header"> <td class="first team">Team</td> <td class="player">Player</td> <td class="type">Type</td> <td class="last">Price</td> </tr> </thead> <tbody> <% _.each( playersArray, function( player, index ) { %> <tr> <td class="first team"> <% if( player.teamLink ) { %> <a href="<%= player.teamLink %>"> <div class="auction-table__logo tLogo16x30 <%= player.teamCssClass %>"></div> <span class="auction-table__team-text u-hide-phablet"><%= player.teamName %></span> <span class="auction-table__team-text u-show-phablet"><%= player.teamAbbr %></span> </a> <% } else { %> <div class="auction-table__logo tLogo16x30 <%= player.teamCssClass %>"></div> <span class="auction-table__team-text u-hide-phablet"><%= player.teamName %></span> <span class="auction-table__team-text u-show-phablet"><%= player.teamAbbr %></span> <% } %> </td> <td class="player"><%= player.name %></td> <td class="type"><%= player.type %></td> <td class="last"><%= player.hammerPrice %></td> </tr> <% } ); %> </tbody> </table> <% } %>'),PULSE.app.templates["twitter-list"]=_.template('<% _.each(tweets, function(tweet, index) { %> <li class="<%= index === 0 ? \'first\' : \'\' %>"> <a href="<%= tweet.link %>" target="_BLANK" class="time"><div class="icon"></div><%= tweet.timestamp %></a> <a href="<%= tweet.user.link %>" target="_BLANK"> <img class="avatar js-action-profile-avatar" src="<%= tweet.user.avatarUrl %>" alt="avatar"> </a> <a class="name" href="<%= tweet.user.link %>" target="_BLANK"><%= tweet.user.name %></a> <div class="handle">@<%= tweet.user.account %></div> <p><%= tweet.text %></p> <div class="intents"> <a onclick="PULSE.CLIENT.TwitterController.tweetEvent(\'tweet\',{in_reply_to:\'<%= tweet.id %>\'})" class="reply">Reply</a> <a onclick="PULSE.CLIENT.TwitterController.tweetEvent(\'retweet\',{tweet_id:\'<%= tweet.id %>\'})" class="retweet">Retweet</a> <a onclick="PULSE.CLIENT.TwitterController.tweetEvent(\'favorite\',{tweet_id:\'<%= tweet.id %>\'})" class="favourite">Favourite</a> </div> </li> <% }); %>'),PULSE.app.templates["unsold-players-list"]=_.template('<div class="auction-table__table-cntr"> <% if( showHeader ) { %> <div class="auction-table__table-title"><h1>Unsold Players</h1></div> <% } %> <table class="l-three-column" border="0"> <thead> <tr class="header"> <td class="first player">Player</td> <td class="middle type">Type</td> <td class="last">Base Price</td> </tr> </thead> <tbody> <% _.each( unsoldPlayers, function( player, index ) { %> <tr> <td class="first player"><%= player.name %></td> <td class="middle type"><%= player.type %></td> <td class="last"><%= player.reservePrice %></td> </tr> <% } ); %> </tbody> </table> </div>'),function(t,e){"use strict";var a=function(){};a.extend=function(t,e){var i=a.prototype.extend;a._prototyping=!0;var s=new this;i.call(s,t),s.base=function(){},delete a._prototyping;var n=s.constructor,r=s.constructor=function(){if(!a._prototyping)if(this._constructing||this.constructor==r)this._constructing=!0,n.apply(this,arguments),delete this._constructing;else if(null!==arguments[0])return(arguments[0].extend||i).call(arguments[0],s)};return r.ancestor=this,r.extend=this.extend,r.forEach=this.forEach,r.implement=this.implement,r.prototype=s,r.toString=this.toString,r.valueOf=function(t){return"object"==t?r:n.valueOf()},i.call(r,e),"function"==typeof r.init&&r.init(),r},a.prototype={extend:function(t,e){if(arguments.length>1){var i=this[t];if(i&&"function"==typeof e&&(!i.valueOf||i.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var s=e.valueOf();e=function(){var t=this.base||a.prototype.base;this.base=i;var e=s.apply(this,arguments);return this.base=t,e},e.valueOf=function(t){return"object"==t?e:s},e.toString=a.toString}this[t]=e}else if(t){var n=a.prototype.extend;a._prototyping||"function"==typeof this||(n=this.extend||n);for(var r={toSource:null},o=["constructor","toString","valueOf"],c=a._prototyping?0:1;l=o[c++];)t[l]!=r[l]&&n.call(this,l,t[l]);for(var l in t)r[l]||n.call(this,l,t[l])}return this}},a=a.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,e,a){for(var i in t)void 0===this.prototype[i]&&e.call(a,t[i],i,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}});var i;i=function(t,e,a){return e instanceof Object&&e instanceof Date==!1&&(a=e,e=0),new i.Factory(t,e,a)},i.Lang={},i.Base=a.extend({buildDate:"2014-12-12",version:"0.7.7",constructor:function(t,a){"object"!=typeof t&&(t={}),"object"!=typeof a&&(a={}),this.setOptions(e.object.extend(!0,{},t,a))},callback:function(t){if("function"==typeof t){for(var e=[],a=1;a<=arguments.length;a++)arguments[a]&&e.push(arguments[a]);t.apply(this,e)}},log:function(t){window.console&&console.log&&console.log(t)},getOption:function(t){return!!this[t]&&this[t]},getOptions:function(){return this},setOption:function(t,e){this[t]=e},setOptions:function(t){for(var e in t)"undefined"!=typeof t[e]&&this.setOption(e,t[e])}}),i.Face=i.Base.extend({autoStart:!0,dividers:[],factory:!1,lists:[],constructor:function(t,e){this.dividers=[],this.lists=[],this.base(e),this.factory=t},build:function(){this.autoStart&&this.start()},createDivider:function(t,e,a){"boolean"!=typeof e&&e||(a=!1,e=t);var i=['<span class="'+this.factory.classes.dot+' top"></span>','<span class="'+this.factory.classes.dot+' bottom"></span>'].join("");a&&(i=""),t=this.factory.localize(t);var s=['<span class="'+this.factory.classes.divider+" "+(e?e:"").toLowerCase()+'">','<span class="'+this.factory.classes.label+'">'+(t?t:"")+"</span>",i,"</span>"],n=s.join("");return this.dividers.push(n),n},createList:function(t,e){"object"==typeof t&&(e=t,t=0);var a=new i.List(this.factory,t,e);return this.lists.push(a),a},reset:function(){this.factory.time=new i.Time(this.factory,this.factory.original?Math.round(this.factory.original):0,{minimumDigits:this.factory.minimumDigits}),this.flip(this.factory.original,!1)},appendDigitToClock:function(t){t.$el.append(!1)},addDigit:function(t){var e=this.createList(t,{classes:{active:this.factory.classes.active,before:this.factory.classes.before,flip:this.factory.classes.flip}});this.appendDigitToClock(e)},start:function(){t.common.event.dispatch(t.common.event.FlipClock.START,{},this.factory.$el)},stop:function(){t.common.event.dispatch(t.common.event.FlipClock.STOP,{},this.factory.$el)},autoIncrement:function(){this.factory.countdown?this.decrement():this.increment()},increment:function(){this.factory.time.addSecond()},decrement:function(){0==this.factory.time.getTimeSeconds()?this.factory.stop():this.factory.time.subSecond()},flip:function(t,e){var a=this;t.forEach(function(t,i){var s=a.lists[i];s?(e||t==s.digit||s.play(i),s.select(t,i)):a.addDigit(t)})}}),i.Factory=i.Base.extend({animationRate:1e3,autoStart:!0,callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},classes:{active:"flip-clock-active",before:"flip-clock-before",divider:"flip-clock-divider",dot:"flip-clock-dot",label:"flip-clock-label",flip:"flip",play:"play",wrapper:"flip-clock-wrapper"},clockFace:"HourlyCounter",countdown:!1,defaultClockFace:"HourlyCounter",defaultLanguage:"english",$el:!1,face:!0,lang:!1,language:"english",minimumDigits:0,original:!1,running:!1,time:!1,timer:!1,$wrapper:!1,constructor:function(t,a,s){s||(s={}),this.lists=[],this.running=!1,this.base(s),e.style.addClass(t,this.classes.wrapper),this.$el=t,this.$wrapper=this.$el,this.original=a instanceof Date?a:a?Math.round(a):0,this.time=new i.Time(this,this.original,{minimumDigits:this.minimumDigits,animationRate:this.animationRate}),this.timer=new i.Timer(this,s),this.loadLanguage(this.language),this.loadClockFace(this.clockFace,s),this.autoStart&&this.start()},loadClockFace:function(t,e){var a,s="Face",n=!1;return t=t.ucfirst()+s,this.face.stop&&(this.stop(),n=!0),this.$el.innerHTML="",this.time.minimumDigits=this.minimumDigits,a=i[t]?new i[t](this,e):new i[this.defaultClockFace+s](this,e),this.face=a,a.build(),n&&this.start(),this.face},loadLanguage:function(t){var e;return e=i.Lang[t.ucfirst()]?i.Lang[t.ucfirst()]:i.Lang[t]?i.Lang[t]:i.Lang[this.defaultLanguage],this.lang=e},localize:function(t,e){var a=this.lang;if(!t)return null;var i=t.toLowerCase();return"object"==typeof e&&(a=e),a&&a[i]?a[i]:t},start:function(t){var e=this;e.running||e.countdown&&!(e.countdown&&e.time.time>0)?e.log("Trying to start timer when countdown already at 0"):(e.face.start(e.time),e.timer.start(function(){e.flip(),"function"==typeof t&&t()}))},stop:function(t){this.face.stop(),this.timer.stop(t);for(var e in this.lists)this.lists.hasOwnProperty(e)&&this.lists[e].stop()},reset:function(t){this.timer.reset(t),this.face.reset()},setTime:function(t){this.time.time=t,this.flip(!0)},getTime:function(t){return this.time},setCountdown:function(t){var e=this.running;this.countdown=!!t,e&&(this.stop(),this.start())},flip:function(t){this.face.flip(!1,t)}}),i.List=i.Base.extend({digit:0,classes:{active:"flip-clock-active",before:"flip-clock-before",flip:"flip"},factory:!1,$el:!1,$obj:!1,items:[],lastDigit:0,constructor:function(t,a,i){this.factory=t,this.digit=a,this.lastDigit=a,this.$el=this.createList(),this.$obj=this.$el,a>0&&this.select(a),e.dom.appendDomString(this.factory.$el,this.$el)},select:function(t,a){if("undefined"==typeof t?t=this.digit:this.digit=t,this.digit!=this.lastDigit){var i=this,s=this.factory.$el.querySelectorAll(".flip"),n=(document.createElement("ul"),s[a].querySelector("."+this.classes.before));e.style.removeClass(n,i.classes.before);var r=s[a].querySelector("."+this.classes.active);e.style.removeClass(r,i.classes.active),e.style.addClass(r,i.classes.before),this.appendListItem(this.classes.active,this.digit,a),n.parentNode.removeChild(n),this.lastDigit=this.digit}},play:function(t){var a=this.factory.$el.querySelectorAll(".flip");e.style.addClass(a[t],this.factory.classes.play)},stop:function(){var t=this;setTimeout(function(){e.style.removeClass(t.$el,t.factory.classes.play)},this.factory.timer.interval)},createListItem:function(t,e){return['<li class="'+(t?t:"")+'">','<a href="#">','<div class="up">','<div class="shadow"></div>','<div class="inn">'+(e?e:"")+'</div><div class="inn inn--half">'+(e?e:"")+"</div>","</div>",'<div class="down">','<div class="shadow"></div>','<div class="inn">'+(e?e:"")+'</div><div class="inn inn--half">'+(e?e:"")+"</div>","</div>","</a>","</li>"].join("")},appendListItem:function(t,a,i){var s=this.createListItem(t,a),n=this.factory.$el.querySelectorAll(".flip");e.dom.appendDomString(n[i],s)},createList:function(){var t=this.getPrevDigit()?this.getPrevDigit():this.digit,e='<ul class="'+this.classes.flip+(this.factory.running?this.factory.classes.play:"")+'">'+this.createListItem(this.classes.before,t)+this.createListItem(this.classes.active,this.digit)+"</ul>";return e},getNextDigit:function(){return 9==this.digit?0:this.digit+1},getPrevDigit:function(){return 0==this.digit?9:this.digit-1}}),String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},i.Time=i.Base.extend({time:0,factory:!1,minimumDigits:0,constructor:function(t,e,a){"object"!=typeof a&&(a={}),a.minimumDigits||(a.minimumDigits=t.minimumDigits),this.base(a),this.factory=t,e&&(this.time=e)},convertDigitsToArray:function(t){var e=[];t=t.toString();for(var a=0;a<t.length;a++)t[a].match(/^\d*$/g)&&e.push(t[a]);return e},digit:function(t){var e=this.toString(),a=e.length;return!!e[a-t]&&e[a-t]},digitize:function(t){var e=[];if(t.forEach(function(t,a){t=t.toString(),1==t.length&&(t="0"+t);for(var i=0;i<t.length;i++)e.push(t.charAt(i))}),e.length>this.minimumDigits&&(this.minimumDigits=e.length),this.minimumDigits>e.length)for(var a=e.length;a<this.minimumDigits;a++)e.unshift("0");return e},getDateObject:function(){return this.time instanceof Date?this.time:new Date((new Date).getTime()+1e3*this.getTimeSeconds())},getDayCounter:function(t){var e=[this.getDays(),this.getHours(!0),this.getMinutes(!0)];return t&&e.push(this.getSeconds(!0)),this.digitize(e)},getDays:function(t){var e=this.getTimeSeconds()/60/60/24;return t&&(e%=7),Math.floor(e)},getHourCounter:function(){var t=this.digitize([this.getHours(),this.getMinutes(!0),this.getSeconds(!0)]);return t},getHourly:function(){return this.getHourCounter()},getHours:function(t){var e=this.getTimeSeconds()/60/60;return t&&(e%=24),Math.floor(e)},getMilitaryTime:function(t,e){"undefined"==typeof e&&(e=!0),t||(t=this.getDateObject());var a=[t.getHours(),t.getMinutes()];return e===!0&&a.push(t.getSeconds()),this.digitize(a)},getMinutes:function(t){var e=this.getTimeSeconds()/60;return t&&(e%=60),Math.floor(e)},getMinuteCounter:function(){var t=this.digitize([this.getMinutes(),this.getSeconds(!0)]);return t},getTimeSeconds:function(t){return t||(t=new Date),this.time instanceof Date?this.factory.countdown?Math.max(this.time.getTime()/1e3-t.getTime()/1e3,0):t.getTime()/1e3-this.time.getTime()/1e3:this.time},getTime:function(t,e){"undefined"==typeof e&&(e=!0),t||(t=this.getDateObject());var a=t.getHours(),i=[a>12?a-12:0===a?12:a,t.getMinutes()];return e===!0&&i.push(t.getSeconds()),this.digitize(i)},getSeconds:function(t){var e=this.getTimeSeconds();return t&&(60==e?e=0:e%=60),Math.ceil(e)},getWeeks:function(t){var e=this.getTimeSeconds()/60/60/24/7;return t&&(e%=52),Math.floor(e)},addSeconds:function(t){this.time instanceof Date?this.time.setSeconds(this.time.getSeconds()+t):this.time+=t},addSecond:function(){this.addSeconds(1)},subSeconds:function(t){this.time instanceof Date?this.time.setSeconds(this.time.getSeconds()):this.time-=t},subSecond:function(){this.subSeconds(1)},toString:function(){return this.getTimeSeconds().toString()}}),i.Timer=i.Base.extend({callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},count:0,factory:!1,interval:1e3,animationRate:1e3,constructor:function(t,e){this.base(e),this.factory=t,this.callback(this.callbacks.init),this.callback(this.callbacks.create)},getElapsed:function(){return this.count*this.interval},getElapsedTime:function(){return new Date(this.time+this.getElapsed())},reset:function(t){clearInterval(this.timer),this.count=0,this._setInterval(t),this.callback(this.callbacks.reset)},start:function(t){this.factory.running=!0,this._createTimer(t),this.callback(this.callbacks.start)},stop:function(t){this.factory.running=!1,this._clearInterval(t),this.callback(this.callbacks.stop),this.callback(t)},_clearInterval:function(){clearInterval(this.timer)},_createTimer:function(t){this._setInterval(t)},_destroyTimer:function(t){this._clearInterval(),this.timer=!1,this.callback(t),this.callback(this.callbacks.destroy)},_interval:function(t){this.callback(this.callbacks.interval),this.callback(t),this.count++},_setInterval:function(t){var e=this;e._interval(t),e.timer=setInterval(function(){e._interval(t)},this.interval)}}),i.TwentyFourHourClockFace=i.Face.extend({constructor:function(t,e){this.base(t,e)},build:function(t){var e=this;this.factory.time.time||(this.factory.original=new Date,this.factory.time=new i.Time(this.factory,this.factory.original));var t=t?t:this.factory.time.getMilitaryTime(!1,this.showSeconds);t.length>0&&t.forEach(function(t,a){e.createList(t)});var a=this.factory.$el.querySelectorAll("ul");this.createDivider(),this.createDivider();var s=document.createElement("span");s.innerHTML=this.dividers[0];var n=document.createElement("span");n.innerHTML=this.dividers[1],a[a.length-2].parentNode.insertBefore(s.firstChild,a[a.length-2]),a[a.length-4].parentNode.insertBefore(n.firstChild,a[a.length-4]),this.base()},flip:function(t,e){this.autoIncrement(),t=t?t:this.factory.time.getMilitaryTime(!1,this.showSeconds),this.base(t,e)}}),i.CounterFace=i.Face.extend({shouldAutoIncrement:!1,constructor:function(t,e){"object"!=typeof e&&(e={}),t.autoStart=!!e.autoStart,e.autoStart&&(this.shouldAutoIncrement=!0),t.increment=function(){t.countdown=!1,t.setTime(t.getTime().getTimeSeconds()+1)},t.decrement=function(){t.countdown=!0;var e=t.getTime().getTimeSeconds();e>0&&t.setTime(e-1)},t.setValue=function(e){t.setTime(e)},t.setCounter=function(e){t.setTime(e)},this.base(t,e)},build:function(){var t=this,e=this.factory.getTime().digitize([this.factory.getTime().time]);e.length>0&&e.forEach(function(e,a){var i=t.createList(e);i.select(e)}),this.lists.forEach(function(t,e){t.play()}),this.base()},flip:function(t,e){this.shouldAutoIncrement&&this.autoIncrement(),t||(t=this.factory.getTime().digitize([this.factory.getTime().time])),this.base(t,e)},reset:function(){this.factory.time=new i.Time(this.factory,this.factory.original?Math.round(this.factory.original):0),this.flip()}}),i.DailyCounterFace=i.Face.extend({showSeconds:!0,constructor:function(t,e){this.base(t,e)},build:function(t){var e=this,a=0;t=t?t:this.factory.time.getDayCounter(this.showSeconds),t.length>0&&t.forEach(function(t,a){e.createList(t)});var i=this.factory.$el.querySelectorAll(".flip");if(this.showSeconds){var s=document.createElement("span");s.innerHTML=this.createDivider("Seconds"),i[i.length-2].parentNode.insertBefore(s.firstChild,i[i.length-2])}else a=2;var n=document.createElement("span");n.innerHTML=this.createDivider("Minutes");var r=document.createElement("span");r.innerHTML=this.createDivider("Hours");var o=document.createElement("span");o.innerHTML=this.createDivider("Days"),i[i.length-4+a].parentNode.insertBefore(n.firstChild,i[i.length-4+a]),i[i.length-6+a].parentNode.insertBefore(r.firstChild,i[i.length-6+a]),i[0].parentNode.insertBefore(o.firstChild,i[0]),this.base()},flip:function(t,e){t||(t=this.factory.time.getDayCounter(this.showSeconds)),this.autoIncrement(),this.base(t,e)}}),i.HourlyCounterFace=i.Face.extend({constructor:function(t,e){this.base(t,e)},build:function(t,e){var a=this;e=e?e:this.factory.time.getHourCounter(),e.length>0&&e.forEach(function(t,e){a.createList(t)});var i=this.factory.$el.querySelectorAll("ul"),s=document.createElement("span");s.innerHTML=this.createDivider("Seconds");var n=document.createElement("span");if(n.innerHTML=this.createDivider("Minutes"),i[i.length-2].parentNode.insertBefore(s.firstChild,i[i.length-2]),i[i.length-4].parentNode.insertBefore(n.firstChild,i[i.length-4]),!t){var r=document.createElement("span");r.innerHTML=this.createDivider("Hours",!0),i[0].parentNode.insertBefore(r.firstChild,i[0])}this.base()},flip:function(t,e){t||(t=this.factory.time.getHourCounter()),this.autoIncrement(),this.base(t,e)},appendDigitToClock:function(t){this.base(t),this.dividers[0].insertAfter(this.dividers[0].next())}}),i.MinuteCounterFace=i.HourlyCounterFace.extend({clearExcessDigits:!1,constructor:function(t,e){this.base(t,e)},build:function(){this.base(!0,this.factory.time.getMinuteCounter())},flip:function(t,e){t||(t=this.factory.time.getMinuteCounter()),this.base(t,e)}}),i.TwelveHourClockFace=i.TwentyFourHourClockFace.extend({meridium:!1,meridiumText:"AM",build:function(){var t=this.factory.time.getTime(!1,this.showSeconds);this.base(t),this.meridiumText=this.getMeridium(),this.meridium=$(['<ul class="flip-clock-meridium">',"<li>",'<a href="#">'+this.meridiumText+"</a>","</li>","</ul>"].join("")),this.meridium.insertAfter(this.lists[this.lists.length-1].$el)},flip:function(t,e){this.meridiumText!=this.getMeridium()&&(this.meridiumText=this.getMeridium(),this.meridium.find("a").html(this.meridiumText)),this.base(this.factory.time.getTime(!1,this.showSeconds),e)},getMeridium:function(){return(new Date).getHours()>=12?"PM":"AM"},isPM:function(){return"PM"==this.getMeridium()},isAM:function(){return"AM"==this.getMeridium()}}),i.Lang.English={years:"Years",months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},i.Lang.en=i.Lang.English,i.Lang["en-us"]=i.Lang.English,i.Lang.english=i.Lang.English,t.FlipClock=i}(PULSE.app,PULSE.core),function(t){t.FlipCountdown=function(e){var a=this;a.element=e,a.time=a.element.getAttribute("data-time"),a.clock=a.element.querySelector(".js-clock"),t.FlipClock(a.clock||a.element,new Date(a.time),{clockFace:"DailyCounter",countdown:!0,showSeconds:!1})};var e=document.querySelectorAll('[data-widget="flip-countdown"]');for(i=0;i<e.length;i++)new t.FlipCountdown(e[i])}(PULSE.app),!PULSE)var PULSE={};if(PULSE.CLIENT||(PULSE.CLIENT={}),PULSE.CLIENT.CRICKET||(PULSE.CLIENT.CRICKET={}),PULSE.CLIENT.CRICKET.PlayerAuction||(PULSE.CLIENT.CRICKET.PlayerAuction={}),PULSE.CLIENT.CRICKET.PlayerAuction.Model=function(t,e){if(this.tournament=t,this.AUCTION_FEED_REFRESH_INTERVAL=e.auction_data_refresh_interval,this.CANARY_FEED_REFRESH_INTERVAL=e.canary_data_refresh_interval,this.AUCTION_FEED_CALLBACK="onAuctionData",this.CANARY_LIST_CALLBACK="onTwitterList",this.CANARY_TALLY_CALLBACK="onTweetTotal",this.AUCTION_FEED_NAME="auction",this.CANARY_TALLY_FEED_NAME=e.canary_tally_feed,this.CANARY_LIST_FEED_NAME=e.canary_list_feed,this.AUCTION_FEED_NAME_PREFIX="auction_",this.SEASON=t.tournamentName,this.YEAR=parseInt(this.SEASON.substr(3),10),this.currencies={ipl2013:"$"},this.franchises={},this.specialities={BAT:"Batsman",BOW:"Bowler",WK:"Wicket Keeper",ALL:"All-Rounder",NA:"n/a"},this.dm=this.getDataManager(),"undefined"!=typeof this.CANARY_LIST_FEED_NAME){var a=this.getCanaryDataUrl(this.CANARY_LIST_FEED_NAME);this.dm.addFeed(this.CANARY_LIST_FEED_NAME,a,this.CANARY_FEED_REFRESH_INTERVAL,this.CANARY_LIST_CALLBACK,[this])}if("undefined"!=typeof this.CANARY_TALLY_FEED_NAME){var a=this.getCanaryDataUrl(this.CANARY_TALLY_FEED_NAME);this.dm.addFeed(this.CANARY_TALLY_FEED_NAME,a,this.CANARY_FEED_REFRESH_INTERVAL,this.CANARY_TALLY_CALLBACK,[this])}this.dm.addFeed(this.AUCTION_FEED_NAME+this.YEAR,this.makeDataUrl(this.AUCTION_FEED_NAME_PREFIX+this.YEAR),this.AUCTION_FEED_REFRESH_INTERVAL,this.AUCTION_FEED_CALLBACK,[this]),this.dm.startAll()},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getDataManager=function(){return void 0===window.datamgr&&(window.datamgr=new PULSE.CLIENT.JqueryJSONPDataManager),window.datamgr},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.makeDataUrl=function(t){return"//datacdn.iplt20.com/dynamic/data/core/cricket/2012/"+this.SEASON+"/"+t+".js"},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getCanaryDataUrl=function(t){return"//datacdn.iplt20.com/dynamic/data/canary/"+t+".js"},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.onData=function(t,e){e.startsWith("auction")&&t?t.year==this.YEAR&&(this.currentYearData={},this.event=t.event,this.currentYearData.last_player_sold=t.last_player_sold,this.currentYearData.teams=t.teams,this.currentYearData.players=t.players,this.createFranchiseLookup(t.year),this.createFranchisePlayerLookup(t.year),$(".playerAuction").trigger("auction/data",{year:t.year,success:!0})):e===this.AUCTION_HEADER_FEED_NAME&&t?(this.headerData=t,$(".playerAuction").trigger("auction/header",{year:t.year,success:!0})):e===this.CANARY_TALLY_FEED_NAME&&t?(this.tweetCount=t.total,$(".playerAuction").trigger("canary/tally",{id:e,success:!0})):e===this.CANARY_LIST_FEED_NAME&&t&&(this.tweetList=t,$(".playerAuction").trigger("canary/list",{id:e,success:!0}))},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.createFranchiseLookup=function(t){this.franchises[t]={};for(var e=this.YEAR==t?this.currentYearData.teams:this.archiveData[t].teams,a=0,i=e.length;a<i;a++){var s=e[a];this.franchises[t][s.id]=s,this.franchises[t][s.id].players=[]}},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.createFranchisePlayerLookup=function(t){for(var e=this.YEAR==t?this.currentYearData.players.S:this.archiveData[t].players.S,a=0,i=e.length;a<i;a++){var s=e[a];this.franchises[t][s.franchise_year_id].players.push(s)}},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getLastSoldModel=function(){if(this.event)return this.event.show_last_sold?this.currentYearData.last_player_sold:void 0},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getEventTitle=function(){if(this.event)return this.event.name},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getSoldPlayersModels=function(t){var e=this,a=this.franchises[t],i=$.map(a,function(t){var a={name:t.franchise.name,abbreviation:t.franchise.abbreviation,cssClass:t.franchise.abbreviation,players:$.map(t.players,function(t){var a={name:t.player.name,type:e.specialities[t.speciality],hammerPrice:t.hammer_price_text,nationality:t.player.nationality};return a})};return a});return i.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),{teamArray:i}},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getFranchiseModels=function(){var t=this.currentYearData.teams,e=$.map(t,function(t){var e={name:t.franchise.name,abbreviation:t.franchise.abbreviation,
cssClass:t.franchise.abbreviation,budgetLeft:t.budget_left_text,rtmLeft:t.rtm_count-t.rtm_spent,overseasPlayers:t.total_overseas_players,totalPlayers:t.total_overseas_players+t.total_indian_players};return e});return e.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),{teamsArray:e}},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getHeaderDataModel=function(t){for(var e=this.getSoldPlayersModels(t),a=0,i=0,s=0,n={name:"",whoGot:"",price:""},r=0;r<e.teamArray.length;r++){var o=e.teamArray[r];a+=o.players.length;for(var c=0;c<o.players.length;c++){var l=o.players[c];"Overseas"===l.nationality&&(i+=1),s+=Number(l.hammerPrice.replace(/[^0-9\.]+/g,"")),Number(l.hammerPrice.replace(/[^0-9\.]+/g,""))>n.price&&(n.name=l.name,n.whoGot=o.abbreviation,n.price=Number(l.hammerPrice.replace(/[^0-9\.]+/g,"")))}}"$"===this.currencies[this.SEASON]?(n.price=this.convertIntoUSD(n.price),s=this.convertIntoUSD(s)):(n.price=this.convertIntoIND(n.price),s=this.convertIntoIND(s));var h={totalSold:a,overseas:i,totalSpent:s,mostExpensive:n,currency:this.currencies[this.SEASON]};return h},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.convertIntoIND=function(t){t=t.toString();var e=t.substring(t.length-3),a=t.substring(0,t.length-3);""!=a&&(e=","+e);var i=a.replace(/\B(?=(\d{2})+(?!\d))/g,",")+e;return i},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.convertIntoUSD=function(t){return t.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getTopBuysModels=function(t,e){var a=this,i=this.currentYearData.players.S,s=$.map(i,function(i,s){if(s<e){var n=a.franchises[t][i.franchise_year_id],r={teamName:n.franchise.name,teamAbbr:n.franchise.abbreviation,teamCssClass:n.franchise.abbreviation,name:i.player.name,type:a.specialities[i.speciality],hammerPrice:i.hammer_price_text};return r}});return{playersArray:s}},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getMarqueePlayersModels=function(){var t=this,e=this.currentYearData.players.A,a=$.map(e,function(e,a){if(e.marquee_player){var i={name:e.player.name,type:t.specialities[e.speciality],reservePrice:e.reserve_price_text};return i}});return{marqueePlayers:a}},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getSpecialtyPlayersModelsArray=function(){for(var t=this,e=this.currentYearData.players.A,a=[{name:"Batsmen",modelArray:[]},{name:"Bowlers",modelArray:[]},{name:"Wicket Keepers",modelArray:[]},{name:"All-Rounders",modelArray:[]},{name:"Other",modelArray:[]}],i=0,s=e.length;i<s;i++){var n,r=e[i];if(!r.marquee_player){switch(r.speciality){case"BAT":n=0;break;case"BOW":n=1;break;case"WK":n=2;break;case"ALL":n=3;break;case"NA":n=4}a[n].modelArray.push({name:r.player.name,type:t.specialities[r.speciality],reservePrice:r.reserve_price_text})}}return a},PULSE.CLIENT.CRICKET.PlayerAuction.Model.prototype.getUnsoldPlayersModels=function(t){var e=this,a=t?this.archiveData[t].players.U:this.currentYearData.players.U,i=$.map(a,function(t,a){var i={name:t.player.name,type:e.specialities[t.speciality],reservePrice:t.reserve_price_text};return i});return{unsoldPlayers:i}},!PULSE)var PULSE={};PULSE.CLIENT||(PULSE.CLIENT={}),PULSE.CLIENT.CRICKET||(PULSE.CLIENT.CRICKET={}),PULSE.CLIENT.CRICKET.PlayerAuction||(PULSE.CLIENT.CRICKET.PlayerAuction={}),PULSE.CLIENT.CRICKET.PlayerAuction.Instance=function(t,e,a){this.YEAR=parseInt(a.tournamentName.substr(3),10),this.element=t[0],this.tournament=a,this.$widget=$(t),this.$container=this.$widget,this.auctionHeader=t[0].querySelector('[data-widget="auction-header"]'),this.model=new PULSE.CLIENT.CRICKET.PlayerAuction.Model(a,{auction_data_refresh_interval:10,canary_data_refresh_interval:10,canary_tally_feed:"ipl2014auctioncounter/tally"}),this.auctionClockContainer=t[0].querySelector('[data-widget="flip-countdown"]'),this.auctionClock=this.auctionClockContainer.querySelector(".js-clock"),this.auctionDate=this.auctionClockContainer?PULSE.CLIENT.DateUtil.parseDateTime(this.auctionClockContainer.getAttribute("data-time")):new Date,this.compareDates(),this.max_numbers={2018:{overseas:8,total:25},"default":{overseas:9,total:27}},this.twitterFeed=new PULSE.CLIENT.TwitterFeed($(".playerAuction .tweetsCntr"),{account:this.tournament.tournamentName,fileName:"ipl2014auctionlist",template:"twitter-list"},(!0)),this.$nav=new PULSE.CLIENT.UI.ToggleNav({navigationContainer:$(".js-auction-nav"),contentContainer:$(".js-auction-content>.js-table-cntr")}),this.state="",$('.videoListWidget[data-season="'+this.tournament.tournamentName+'"]').show(),$(".js-auction-nav a").on("click",function(t){t.preventDefault()});var i=this;$(".playerAuction .js-auction-sub-nav").on("click","li a",function(t){i.$widget.find(".js-auction-sub-nav .js-tab-button").html($(this).html()),$(this).parent().siblings().removeClass("active"),$(this).parent().addClass("active"),t.preventDefault()}),$(".playerAuction .js-auction-sub-nav").on("click",".js-tab-button, .current",function(t){$(".playerAuction .js-auction-sub-nav").find(".js-auction-nav").toggle()});var i=this;$(".playerAuction").on("auction/data",function(t,e){e.year===i.YEAR&&(i.resetHeaderClass(),i.updateStateUi(i.getAuctionState()))})},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.compareDates=function(){new Date<this.auctionDate&&PULSE.core.style.removeClass(this.auctionClockContainer,"u-hide")},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.resetHeaderClass=function(){PULSE.core.style.removeClass(this.auctionHeader,"auction-header--post"),PULSE.core.style.removeClass(this.auctionHeader,"auction-header--pre"),PULSE.core.style.removeClass(this.auctionHeader,"auction-header--live")},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.getAuctionState=function(){var t=this.getTimeDifferenceInMS();return!this.model.event.is_archive&&t>=0?this.state="PRE":!this.model.event.is_archive&&t<0?this.state="LIVE":this.state="POST",this.state},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.getTimeDifferenceInMS=function(){var t=new Date,e=PULSE.CLIENT.DateUtil.getUtcDateObject(PULSE.CLIENT.DateUtil.parseDateTime(t.toString())).getTime(),a=PULSE.CLIENT.DateUtil.getUtcDateObject(PULSE.CLIENT.DateUtil.parseDateTime(this.auctionDate.toString())).getTime(),i=a-e;return i},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.refreshPostHeaderNumbers=function(){var t=this.model.getHeaderDataModel(this.YEAR);PULSE.CLIENT.Template.publish("post-header-info",$(this.auctionHeader).find(".js-auction-details-post"),t)},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.updateStateUi=function(t){switch(t){case"PRE":PULSE.core.style.addClass(this.auctionHeader,"auction-header--pre"),this.refreshPreHeader();break;case"LIVE":PULSE.core.style.addClass(this.auctionClockContainer,"u-hide"),PULSE.core.style.addClass(this.auctionHeader,"auction-header--live"),this.refreshLastSold();break;case"POST":PULSE.core.style.addClass(this.auctionClockContainer,"u-hide"),PULSE.core.style.addClass(this.auctionHeader,"auction-header--post"),this.refreshPostHeaderNumbers()}this.refreshCurrentYearTabs()},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.refreshPreHeader=function(){var t=this;this.auctionClock.addEventListener(PULSE.app.common.event.FlipClock.STOP,function(e){PULSE.core.style.addClass(t.auctionClockContainer,"u-hide"),t.resetHeaderClass(),t.updateStateUi(t.getAuctionState())},!1)},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.refreshLastSold=function(){var t=this.model.getLastSoldModel(),e=this.model.getSoldPlayersModels(this.YEAR),a=this.model.getHeaderDataModel(this.YEAR);if(a){var i="",s={header:a};if(t){for(var n=0;n!=e.teamArray.length;n++)e.teamArray[n].name===t.franchise_name&&(i=e.teamArray[n]);s.player=t,s.team=i}PULSE.CLIENT.Template.publish("live-header-info",$(this.auctionHeader).find(".js-auction-details-live-mobile"),s),PULSE.CLIENT.Template.publish("live-header-info",$(this.auctionHeader).find(".js-auction-details-live"),s)}},PULSE.CLIENT.CRICKET.PlayerAuction.Instance.prototype.refreshCurrentYearTabs=function(){var t=this.model.getFranchiseModels(),e=this.$widget.find(".js-franchise-list");if(PULSE.CLIENT.Template.publish("overview-teams-list",e,$.extend(t,{max_constraints:this.max_numbers[this.YEAR]||this.max_numbers["default"]})),"PRE"!==this.state){var a=this.model.getTopBuysModels(this.YEAR,8),i=this.$widget.find(".js-top-buys-list");PULSE.CLIENT.Template.publish("top-buys-list",i,a)}if(this.model.currentYearData.players.A.length){var s=this.model.getMarqueePlayersModels(),n=this.model.getSpecialtyPlayersModelsArray(),r=this.$widget.find(".js-to-be-auctioned-tab");n.unshift({name:"Marquee Players",modelArray:s.marqueePlayers}),PULSE.CLIENT.Template.publish("to-be-auctioned-list",r,{modelArrays:n,is_archive:this.model.event.is_archive})}if(this.model.currentYearData.players.S.length){var o=this.model.getSoldPlayersModels(this.YEAR),r=this.$widget.find(".js-sold-players-tab");PULSE.CLIENT.Template.publish("sold-players-list",r,o)}if(this.model.currentYearData.players.U.length){var c=this.model.getUnsoldPlayersModels(),r=this.$widget.find(".js-unsold-players-tab");c.showHeader=!1,PULSE.CLIENT.Template.publish("unsold-players-list",r,c)}},window.WidgetController.init("auction",PULSE.CLIENT.CRICKET.PlayerAuction.Instance);