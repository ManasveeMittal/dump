if(PULSE.app.templates["live-match"]=_.template('<a href="<%= matchLink %>" class="scroller-match scroller-match--live"> <p class="scroller-match__header"><span>LIVE:</span> <%= matchDescription %> </p><div class="scroller-match__content"> <div class="scroller-match__team <%= team1batting && !inningsBreak ? \'scroller-match__team--batting\' : \'\' %>"> <span class="scroller-match__team-details"> <span class="scroller-match__team-logo tLogo16x30 <%= team1abbr %>"></span> <span class="scroller-match__team-name"><%= team1abbr %></span> </span> <span class="scroller-match__score"><%= team1innings.join( \' & \' ) %></span> </div> <div class="scroller-match__team <%= team2batting && !inningsBreak ? \'scroller-match__team--batting\' : \'\' %>"> <span class="scroller-match__team-details"> <span class="scroller-match__team-logo tLogo16x30 <%= team2abbr %>"></span> <span class="scroller-match__team-name"><%= team2abbr %></span> </span> <span class="scroller-match__score"><%= team2innings.join( \' & \' ) %></span> </div> </div> </a>'),PULSE.app.templates["match-scroller-list"]=_.template('<% _.each( matchGroups, function( matchGroup ) { %> <li class="match-scroller__date"><%= matchGroup.formattedDate %></li> <% _.each( matchGroup.matches, function( match ) { %> <% if( match.matchState === \'L\' ) { %> <li class="match-scroller__item" data-match-id="<%= match.matchId %>" data-match-state="L"> <a href="<%= match.matchLink %>" class="scroller-match scroller-match--live"> <p class="scroller-match__header"><span>LIVE:</span> <%= match.matchDescription %> </p><div class="scroller-match__content"> <div class="scroller-match__team <%= match.team1batting && !match.inningsBreak ? \'scroller-match__team--batting\' : \'\' %>"> <span class="scroller-match__team-details"> <span class="scroller-match__team-logo tLogo16x30 <%= match.team1abbr %>"></span> <span class="scroller-match__team-name"><%= match.team1abbr %></span> </span> <span class="scroller-match__score"><%= match.team1innings.join( \' & \' ) %></span> </div> <div class="scroller-match__team <%= match.team2batting && !match.inningsBreak ? \'scroller-match__team--batting\' : \'\' %>"> <span class="scroller-match__team-details"> <span class="scroller-match__team-logo tLogo16x30 <%= match.team2abbr %>"></span> <span class="scroller-match__team-name"><%= match.team2abbr %></span> </span> <span class="scroller-match__score"><%= match.team2innings.join( \' & \' ) %></span> </div> </div> </a> </li> <% } else if( match.matchState === \'U\' ) { %> <li class="match-scroller__item" data-match-id="<%= match.matchId %>" data-match-state="U"> <a href="<%= match.matchLink %>" class="scroller-match"> <p class="scroller-match__header"><%= match.matchDescription %>, <%= match.venue.city %></p> <div class="scroller-match__content"> <span class="scroller-match__time"><%= match.formattedMatchTime.IST %> IST</span> <div class="scroller-match__team"> <span class="scroller-match__team-logo tLogo16x30 <%= match.team1abbr %>"></span> <span class="scroller-match__team-name"><%= match.team1abbr %></span> </div> <div class="scroller-match__team"> <span class="scroller-match__team-logo tLogo16x30 <%= match.team2abbr %>"></span> <span class="scroller-match__team-name"><%= match.team2abbr %></span> </div> </div> </a> </li> <% } else { %> <li class="match-scroller__item" data-match-id="<%= match.matchId %>"> <a href="<%= match.matchLink %>" class="scroller-match scroller-match--result"> <p class="scroller-match__header"><%= match.matchSummary %></p> <div class="scroller-match__content"> <div class="scroller-match__team <%= match.team2won ? \'scroller-match__team--loser\' : \'\' %><%= match.team1won ? \'scroller-match__team--winner\' : \'\' %>"> <span class="scroller-match__team-details"> <span class="scroller-match__team-logo tLogo16x30 <%= match.team1abbr %>"></span> <span class="scroller-match__team-name"><%= match.team1abbr %></span> </span> <span class="scroller-match__score"><%= match.team1innings.join( \' & \' ) %></span> </div> <div class="scroller-match__team <%= match.team1won ? \'scroller-match__team--loser\' : \'\' %><%= match.team2won ? \'scroller-match__team--winner\' : \'\' %>"> <span class="scroller-match__team-details"> <span class="scroller-match__team-logo tLogo16x30 <%= match.team2abbr %>"></span> <span class="scroller-match__team-name"><%= match.team2abbr %></span> </span> <span class="scroller-match__score"><%= match.team2innings.join( \' & \' ) %></span> </div> <p></p> </div></a> </li> <% } %> <% } ); %> <% } ); %>'),!PULSE)var PULSE={};if(PULSE.CLIENT||(PULSE.CLIENT={}),PULSE.CLIENT.CRICKET||(PULSE.CLIENT.CRICKET={}),PULSE.CLIENT.CRICKET.Scrollable=function(t){this.$container=t,this.$matchesScroller=this.$container.find(".js-list"),this.$leftScrollButton=this.$container.find(".js-prev"),this.$rightScrollButton=this.$container.find(".js-next"),this.setEventListeners()},PULSE.CLIENT.CRICKET.Scrollable.prototype.setEventListeners=function(){var t=this;this.$leftScrollButton.on("click",function(a){t.scroll(void 0,!0),a.preventDefault()}),this.$rightScrollButton.on("click",function(a){t.scroll(void 0,!1),a.preventDefault()}),PULSE.core.event.windowResize.add({method:this.checkResize.bind(this)})},PULSE.CLIENT.CRICKET.Scrollable.prototype.checkResize=function(){var t=parseInt(this.$matchesScroller.css("left"),10);isNaN(t)&&(t=0),this.scroll(t)},PULSE.CLIENT.CRICKET.Scrollable.prototype.scrollTo=function(t){for(var a=this.$matchesScroller.children(),e=0,s=0;s<a.length;s++){var c=$(a[s]);if(c.is(t))break;e+=c.outerWidth(!0)}var l=this.$matchesScroller.width();this.scroll(l/2-e-t.width()/2)},PULSE.CLIENT.CRICKET.Scrollable.prototype.scroll=function(t,a){var e=this.$matchesScroller.children(),s=0;e.each(function(t,a){s+=$(a).outerWidth(!0)});var c=.7*this.$matchesScroller.outerWidth(),l=this.$container.width(),r=this.$matchesScroller.width(),o=parseInt(this.$matchesScroller.css("left"),10);isNaN(o)&&(o=0),t="undefined"!=typeof t?t:o+(a?1:-1)*c,t>0?(t=0,this.$leftScrollButton.addClass("is-inactive")):this.$leftScrollButton.removeClass("is-inactive"),t+s<l?(t=r-s,this.$rightScrollButton.addClass("is-inactive")):this.$rightScrollButton.removeClass("is-inactive"),this.$matchesScroller.css("left",t+"px"),$("html.touch").length&&(this.$container[0].scrollLeft=-t)},!PULSE)var PULSE={};PULSE.CLIENT||(PULSE.CLIENT={}),PULSE.CLIENT.CRICKET||(PULSE.CLIENT.CRICKET={}),PULSE.CLIENT.CRICKET.MatchesScroller=function(t,a,e){PULSE.CLIENT.CRICKET.Scrollable.call(this,t),this.config=a,this.tournament=e,this.templates={matches:"match-scroller-list",match:"live-match"},this.tournament.getMatchSchedule(),this.tournament.scheduleData.length&&(this.hasData=!0,this.update()),this.setSubscriptions()},PULSE.CLIENT.CRICKET.MatchesScroller.prototype=Object.create(PULSE.CLIENT.CRICKET.Scrollable.prototype),PULSE.CLIENT.CRICKET.MatchesScroller.prototype.constructor=PULSE.CLIENT.CRICKET.Scrollable,PULSE.CLIENT.CRICKET.MatchesScroller.prototype.setSubscriptions=function(){var t=this;$("body").on("schedule/update",function(a,e){e.success&&e.tournamentName===t.tournament.tournamentName&&(t.hasData=!0,t.update())}),$("body").on("scoring/update",function(a,e){e.success&&t.tournament.getMatchById(e.matchId)&&t.updateMatch(e.matchId)})},PULSE.CLIENT.CRICKET.MatchesScroller.prototype.update=function(){var t=this.tournament.getMatchesGroupedByDate(void 0,{dateFormat:"dddd mmmm dS",timeFormat:"htt"}),a={matchGroups:[]};for(var e in t.matches)a.matchGroups.push({date:new Date(e),formattedDate:moment(new Date(e)).format("MMM D").split(" ").join("<br />"),matches:t.matches[e]});if(a.matchGroups.sort(function(t,a){return t.date-a.date}),PULSE.CLIENT.Template.publish(this.templates.matches,this.$matchesScroller,a),!this.focussed){this.scrollToFocus();var s=this;setTimeout(function(){s.$matchesScroller.addClass("has-animations")},0)}},PULSE.CLIENT.CRICKET.MatchesScroller.prototype.scrollToFocus=function(){var t;this.tournament.liveMatches.length?t=this.tournament.liveMatches[0]:this.tournament.upcomingMatches.length?t=this.tournament.upcomingMatches[0]:this.tournament.completeMatches.length&&(t=this.tournament.completeMatches[this.tournament.completeMatches.length-1]),t&&this.scrollTo(this.$matchesScroller.find('[data-match-id="'+t+'"]')),this.focussed=!0},PULSE.CLIENT.CRICKET.MatchesScroller.prototype.updateMatch=function(t){var a=this.$container.find('[data-match-id="'+t+'"]');if(a.length){var e=this.tournament.getMatchById(t).getFullModel({dateFormat:"dddd mmmm dS",timeFormat:"htt"});"L"===e.matchState?PULSE.CLIENT.Template.publish(this.templates.match,a,e):"C"!==e.matchState&&e.matchState===a.attr("data-match-state")||this.update()}},PULSE.CLIENT.CRICKET.MatchesScroller.prototype.activate=function(){this.active||(this.active=!0,this.hasData&&this.update(),this.$container.show())},PULSE.CLIENT.CRICKET.MatchesScroller.prototype.deactivate=function(){this.active&&(this.active=!1,this.$container.hide())},window.WidgetController.init("match-scroller",PULSE.CLIENT.CRICKET.MatchesScroller);